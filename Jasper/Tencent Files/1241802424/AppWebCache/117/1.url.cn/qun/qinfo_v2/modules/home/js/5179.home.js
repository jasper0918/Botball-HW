(function(){(function(a,e){typeof define==="function"&&define.amd?define("face",["simple"],e):a.face=e(a.$)})(this,function(a){var e=function(){var t;function i(b){d=a.dom.getNode("div",{"class":(b.cls?b.cls+" ":"")+"face_selector"});window.setTimeout(function(){d.innerHTML='<div class="face_hover"></div><div class="inner_pnl"></div><div class="row"></div><div class="bg"></div>';h=a.dom.queryClass("face_hover","div",d);w=a.dom.queryClass("inner_pnl","div",d);for(var k=[],j=0;j<105;)k.push('<a href="javascript:void(0)" i='+
j+' hidefocus="true"></a>'),j++;w.innerHTML=k.join("");a.e.add(w,"click",z);a.e.add(w,"mousedown",p);a.e.add(w,"mouseenter",F);a.e.add(w,"mouseleave",x);a.e.add(w,"mouseover",q);a.e.add(document,"mouseup",r);a.e.add(document,"click",A);a.oop.addObserver(e,"saveFace",o);C=a.dom.queryClass("row","div",d);G=true;c(b)},0)}function q(b){b=b.target;if(b.tagName=="A"&&(b=b.getAttribute("i"))){var k=B[b];if(k){var j=Math.floor(b/J),j=b%J<2&&j<2;if(!(j&&h._right||!j&&!h._right&&typeof h._right!="undefined")){var f=
{};f[j?"right":"left"]="7px";f[j?"left":"right"]="";a.css.setStyle(h,f);h._right=j}h.innerHTML='<div class="img"><img class="face" title="'+k+'" src="http://0.web.qstatic.com/webqqpic/style/face/'+b+'.gif" alt="[/'+k+']" rel="face"></div><div class="name">'+k+"</div>"}}}function F(){a.css.show(h)}function x(){a.css.hide(h)}function r(){document.body.releaseCapture&&document.body.releaseCapture();a.e.remove(document,"mouseup",r)}function p(b){document.body.setCapture&&document.body.setCapture();b.preventDefault();
b.stopPropagation();a.e.add(document,"mouseup",r)}function z(a){a.stopPropagation();if(a=a.target.getAttribute("i")){a="[/"+B[a]+"]";if(u)try{var k=u,j="",f=0,h=0;k.focus();if(k.setSelectionRange)f=k.selectionStart,h=k.selectionEnd,f!=h&&k.value.substring(f,h);else if(document.selection){var c,d=document.selection.createRange(),i=document.body.createTextRange();i.moveToElementText(k);j=d.text;d.getBookmark();for(c=0;i.compareEndPoints("StartToStart",d)<0&&d.moveStart("character",-1)!==0;c++)k.value.charAt(c)==
"\n"&&c++;f=c;h=j.length+f}c=h;var s=k.value,d=[],l;d[0]=s.substring(0,f);d[1]=a;d[2]=s.substr(c);l=d.join("");k.value=l}catch(w){}else s=document.createElement("div"),s.innerHTML=H(a),s=s.removeChild(s.getElementsByTagName("img")[0]),I&&I({text:a,dom:s});A()}}function o(){document.body.appendChild(d)}function c(b){u=b.input||null;O=b.parent||document.body;I=b.onSelect||null;L=b.onHide||null;d.style.left=b.x+"px";d.style.top=b.y+"px";if(typeof b.rowX!=="undefined")C.style.left=b.rowX+"px";O.appendChild(d);
a.css.show(d);d.style.visibility="hidden";var k=null;if(k=b.arrowTarget){var b=k.getBoundingClientRect(),j=d.getBoundingClientRect();j.top>=b.top?a.css.removeClass(C,"bottom_row"):a.css.addClass(C,"bottom_row");C.style.left=b.left-j.left-parseInt(t/2)+parseInt(a.css.getClientWidth(k)/2)+"px";a.css.show(C)}else a.css.hide(C);d.style.visibility="visible";l=true}function A(){a.css.hide(d);l=false;L&&L()}var B="\u5fae\u7b11,\u6487\u5634,\u8272,\u53d1\u5446,\u5f97\u610f,\u6d41\u6cea,\u5bb3\u7f9e,\u95ed\u5634,\u7761,\u5927\u54ed,\u5c34\u5c2c,\u53d1\u6012,\u8c03\u76ae,\u5472\u7259,\u60ca\u8bb6,\u96be\u8fc7,\u9177,\u51b7\u6c57,\u6293\u72c2,\u5410,\u5077\u7b11,\u53ef\u7231,\u767d\u773c,\u50b2\u6162,\u9965\u997f,\u56f0,\u60ca\u6050,\u6d41\u6c57,\u61a8\u7b11,\u5927\u5175,\u594b\u6597,\u5492\u9a82,\u7591\u95ee,\u5618,\u6655,\u6298\u78e8,\u8870,\u9ab7\u9ac5,\u6572\u6253,\u518d\u89c1,\u64e6\u6c57,\u62a0\u9f3b,\u9f13\u638c,\u7cd7\u5927\u4e86,\u574f\u7b11,\u5de6\u54fc\u54fc,\u53f3\u54fc\u54fc,\u54c8\u6b20,\u9119\u89c6,\u59d4\u5c48,\u5feb\u54ed\u4e86,\u9634\u9669,\u4eb2\u4eb2,\u5413,\u53ef\u601c,\u83dc\u5200,\u897f\u74dc,\u5564\u9152,\u7bee\u7403,\u4e52\u4e53,\u5496\u5561,\u996d,\u732a\u5934,\u73ab\u7470,\u51cb\u8c22,\u793a\u7231,\u7231\u5fc3,\u5fc3\u788e,\u86cb\u7cd5,\u95ea\u7535,\u70b8\u5f39,\u5200,\u8db3\u7403,\u74e2\u866b,\u4fbf\u4fbf,\u6708\u4eae,\u592a\u9633,\u793c\u7269,\u62e5\u62b1,\u5f3a,\u5f31,\u63e1\u624b,\u80dc\u5229,\u62b1\u62f3,\u52fe\u5f15,\u62f3\u5934,\u5dee\u52b2,\u7231\u4f60,NO,OK,\u7231\u60c5,\u98de\u543b,\u8df3\u8df3,\u53d1\u6296,\u6004\u706b,\u8f6c\u5708,\u78d5\u5934,\u56de\u5934,\u8df3\u7ef3,\u6325\u624b,\u6fc0\u52a8,\u8857\u821e,\u732e\u543b,\u5de6\u592a\u6781,\u53f3\u592a\u6781".split(","),
D="\u53e3\u7ea2,\u94bb\u6212,\u9774\u5b50,\u706f\u7b3c,\u706f\u6ce1,\u70b9\u6ef4,\u7535\u89c6\u673a,\u7167\u76f8\u673a,\u98ce\u8f66,\u516c\u6587\u5305,\u8d2d\u7269\u888b,\u6d77\u9b42\u886b,\u7ea2\u9886\u5dfe,\u8774\u8776\u7ed3,\u7687\u51a0,\u706b\u8f66\u5934,\u706b\u7bad,\u9152\u676f,\u8721\u70db,\u516b\u722a\u9c7c,\u71d5\u5b50,\u5c0f\u732b,\u732b\u5934\u9e70,\u6bdb\u6bdb\u866b,\u9e8b\u9e7f,\u9e2d\u5b50,\u5c0f\u9e21,\u9752\u86d9,\u4e4c\u9f9f,\u718a\u732b,\u68d5\u718a,\u725b\u5976,\u82f9\u679c,\u6a31\u6843,\u6843\u5b50,\u6a58\u5b50,\u897f\u74dc,\u8349\u8393,\u5de7\u514b\u529b\u51b0\u68d2,\u9e21\u817f,\u592a\u9633,\u5f69\u8679,\u6d6e\u4e91,\u591a\u4e91,\u5c0f\u96e8,\u4e2d\u96e8,\u5927\u96e8,\u96ea\u82b1,\u6708\u5706,\u6c7d\u8f66,\u6728\u9a6c,\u95f9\u949f,\u94c5\u7b14,\u96e8\u4f1e,\u6c99\u53d1,\u624b\u67c4,UFO,\u918b\u575b,\u5b59\u609f\u7a7a,\u5510\u50e7,\u5929\u4f7f,\u6076\u9b54,\u62db\u8d22\u732b,\u5a03\u5a03\u5934,\u536b\u751f\u7eb8,\u4ed9\u4eba\u7403,\u9999\u70df,\u70df\u6597,\u677f\u7816,\u8759\u8760,\u5e7d\u7075,\u5357\u74dc\u706f".split(","),
y={"\u5472\u7259":{text:"\u5472\u7259",code:0},"\u8c03\u76ae":{text:"\u8c03\u76ae",code:1},"\u6d41\u6c57":{text:"\u6d41\u6c57",code:2},"\u5077\u7b11":{text:"\u5077\u7b11",code:3},"\u518d\u89c1":{text:"\u518d\u89c1",code:4},"\u6572\u6253":{text:"\u6572\u6253",code:5},"\u64e6\u6c57":{text:"\u64e6\u6c57",code:6},"\u732a\u5934":{text:"\u732a\u5934",code:7},"\u73ab\u7470":{text:"\u73ab\u7470",code:8},"\u6d41\u6cea":{text:"\u6d41\u6cea",code:9},"\u5927\u54ed":{text:"\u5927\u54ed",code:10},"\u5618":{text:"\u5618",
code:11},"\u9177":{text:"\u9177",code:12},"\u6293\u72c2":{text:"\u6293\u72c2",code:13},"\u59d4\u5c48":{text:"\u59d4\u5c48",code:14},"\u4fbf\u4fbf":{text:"\u4fbf\u4fbf",code:15},"\u70b8\u5f39":{text:"\u70b8\u5f39",code:16},"\u83dc\u5200":{text:"\u83dc\u5200",code:17},"\u53ef\u7231":{text:"\u53ef\u7231",code:18},"\u8272":{text:"\u8272",code:19},"\u5bb3\u7f9e":{text:"\u5bb3\u7f9e",code:20},"\u5f97\u610f":{text:"\u5f97\u610f",code:21},"\u5410":{text:"\u5410",code:22},"\u5fae\u7b11":{text:"\u5fae\u7b11",
code:23},"\u53d1\u6012":{text:"\u53d1\u6012",code:24},"\u5c34\u5c2c":{text:"\u5c34\u5c2c",code:25},"\u60ca\u6050":{text:"\u60ca\u6050",code:26},"\u51b7\u6c57":{text:"\u51b7\u6c57",code:27},"\u7231\u5fc3":{text:"\u7231\u5fc3",code:28},"\u793a\u7231":{text:"\u793a\u7231",code:29},"\u767d\u773c":{text:"\u767d\u773c",code:30},"\u50b2\u6162":{text:"\u50b2\u6162",code:31},"\u96be\u8fc7":{text:"\u96be\u8fc7",code:32},"\u60ca\u8bb6":{text:"\u60ca\u8bb6",code:33},"\u7591\u95ee":{text:"\u7591\u95ee",code:34},
"\u7761":{text:"\u7761",code:35},"\u4eb2\u4eb2":{text:"\u4eb2\u4eb2",code:36},"\u61a8\u7b11":{text:"\u61a8\u7b11",code:37},"\u7231\u60c5":{text:"\u7231\u60c5",code:38},"\u8870":{text:"\u8870",code:39},"\u6487\u5634":{text:"\u6487\u5634",code:40},"\u9634\u9669":{text:"\u9634\u9669",code:41},"\u594b\u6597":{text:"\u594b\u6597",code:42},"\u53d1\u5446":{text:"\u53d1\u5446",code:43},"\u53f3\u54fc\u54fc":{text:"\u53f3\u54fc\u54fc",code:44},"\u62e5\u62b1":{text:"\u62e5\u62b1",code:45},"\u574f\u7b11":{text:"\u574f\u7b11",
code:46},"\u98de\u543b":{text:"\u98de\u543b",code:47},"\u9119\u89c6":{text:"\u9119\u89c6",code:48},"\u6655":{text:"\u6655",code:49},"\u5927\u5175":{text:"\u5927\u5175",code:50},"\u53ef\u601c":{text:"\u53ef\u601c",code:51},"\u5f3a":{text:"\u5f3a",code:52},"\u5f31":{text:"\u5f31",code:53},"\u63e1\u624b":{text:"\u63e1\u624b",code:54},"\u80dc\u5229":{text:"\u80dc\u5229",code:55},"\u62b1\u62f3":{text:"\u62b1\u62f3",code:56},"\u51cb\u8c22":{text:"\u51cb\u8c22",code:57},"\u996d":{text:"\u996d",code:58},
"\u86cb\u7cd5":{text:"\u86cb\u7cd5",code:59},"\u897f\u74dc":{text:"\u897f\u74dc",code:60},"\u5564\u9152":{text:"\u5564\u9152",code:61},"\u74e2\u866b":{text:"\u74e2\u866b",code:62},"\u52fe\u5f15":{text:"\u52fe\u5f15",code:63},OK:{text:"OK",code:64},"\u7231\u4f60":{text:"\u7231\u4f60",code:65},"\u5496\u5561":{text:"\u5496\u5561",code:66},"\u94b1":{text:"\u94b1",code:67},"\u6708\u4eae":{text:"\u6708\u4eae",code:68},"\u7f8e\u5973":{text:"\u7f8e\u5973",code:69},"\u5200":{text:"\u5200",code:70},"\u53d1\u6296":{text:"\u53d1\u6296",
code:71},"\u5dee\u52b2":{text:"\u5dee\u52b2",code:72},"\u62f3\u5934":{text:"\u62f3\u5934",code:73},"\u5fc3\u788e":{text:"\u5fc3\u788e",code:74},"\u592a\u9633":{text:"\u592a\u9633",code:75},"\u793c\u7269":{text:"\u793c\u7269",code:76},"\u8db3\u7403":{text:"\u8db3\u7403",code:77},"\u9ab7\u9ac5":{text:"\u9ab7\u9ac5",code:78},"\u6325\u624b":{text:"\u6325\u624b",code:79},"\u95ea\u7535":{text:"\u95ea\u7535",code:80},"\u9965\u997f":{text:"\u9965\u997f",code:81},"\u56f0":{text:"\u56f0",code:82},"\u5492\u9a82":{text:"\u5492\u9a82",
code:83},"\u6298\u78e8":{text:"\u6298\u78e8",code:84},"\u62a0\u9f3b":{text:"\u62a0\u9f3b",code:85},"\u9f13\u638c":{text:"\u9f13\u638c",code:86},"\u7cd7\u5927\u4e86":{text:"\u7cd7\u5927\u4e86",code:87},"\u5de6\u54fc\u54fc":{text:"\u5de6\u54fc\u54fc",code:88},"\u54c8\u6b20":{text:"\u54c8\u6b20",code:89},"\u5feb\u54ed\u4e86":{text:"\u5feb\u54ed\u4e86",code:90},"\u5413":{text:"\u5413",code:91},"\u7bee\u7403":{text:"\u7bee\u7403",code:92},"\u4e52\u4e53":{text:"\u4e52\u4e53",code:93},NO:{text:"NO",code:94},
"\u8df3\u8df3":{text:"\u8df3\u8df3",code:95},"\u6004\u706b":{text:"\u6004\u706b",code:96},"\u8f6c\u5708":{text:"\u8f6c\u5708",code:97},"\u78d5\u5934":{text:"\u78d5\u5934",code:98},"\u56de\u5934":{text:"\u56de\u5934",code:99},"\u8df3\u7ef3":{text:"\u8df3\u7ef3",code:100},"\u6fc0\u52a8":{text:"\u6fc0\u52a8",code:101},"\u8857\u821e":{text:"\u8857\u821e",code:102},"\u732e\u543b":{text:"\u732e\u543b",code:103},"\u5de6\u592a\u6781":{text:"\u5de6\u592a\u6781",code:104},"\u53f3\u592a\u6781":{text:"\u53f3\u592a\u6781",
code:105},"\u95ed\u5634":{text:"\u95ed\u5634",code:106},"\u62db\u8d22\u8fdb\u5b9d":{text:"\u62db\u8d22\u8fdb\u5b9d",code:107},"\u53cc\u559c":{text:"\u53cc\u559c",code:108},"\u97ad\u70ae":{text:"\u97ad\u70ae",code:109},"\u706f\u7b3c":{text:"\u706f\u7b3c",code:110},"\u53d1\u8d22":{text:"\u53d1\u8d22",code:111},"K\u6b4c":{text:"K\u6b4c",code:112},"\u8d2d\u7269":{text:"\u8d2d\u7269",code:113},"\u90ae\u4ef6":{text:"\u90ae\u4ef6",code:114},"\u5e05":{text:"\u5e05",code:115},"\u559d\u5f69":{text:"\u559d\u5f69",
code:116},"\u7948\u7977":{text:"\u7948\u7977",code:117},"\u7206\u7b4b":{text:"\u7206\u7b4b",code:118},"\u68d2\u68d2\u7cd6":{text:"\u68d2\u68d2\u7cd6",code:119},"\u559d\u5976":{text:"\u559d\u5976",code:120},"\u4e0b\u9762":{text:"\u4e0b\u9762",code:121},"\u9999\u8549":{text:"\u9999\u8549",code:122},"\u98de\u673a":{text:"\u98de\u673a",code:123},"\u5f00\u8f66":{text:"\u5f00\u8f66",code:124},"\u9ad8\u94c1\u5de6\u8f66\u5934":{text:"\u9ad8\u94c1\u5de6\u8f66\u5934",code:125},"\u8f66\u53a2":{text:"\u8f66\u53a2",
code:126},"\u9ad8\u94c1\u53f3\u8f66\u5934":{text:"\u9ad8\u94c1\u53f3\u8f66\u5934",code:127},"\u591a\u4e91":{text:"\u591a\u4e91",code:128},"\u4e0b\u96e8":{text:"\u4e0b\u96e8",code:129},"\u949e\u7968":{text:"\u949e\u7968",code:130},"\u718a\u732b":{text:"\u718a\u732b",code:131},"\u706f\u6ce1":{text:"\u706f\u6ce1",code:132},"\u98ce\u8f66":{text:"\u98ce\u8f66",code:133},"\u95f9\u949f":{text:"\u95f9\u949f",code:134},"\u6253\u4f1e":{text:"\u6253\u4f1e",code:135},"\u5f69\u7403":{text:"\u5f69\u7403",code:136},
"\u94bb\u6212":{text:"\u94bb\u6212",code:137},"\u6c99\u53d1":{text:"\u6c99\u53d1",code:138},"\u7eb8\u5dfe":{text:"\u7eb8\u5dfe",code:139},"\u836f":{text:"\u836f",code:140},"\u624b\u67aa":{text:"\u624b\u67aa",code:141},"\u9752\u86d9":{text:"\u9752\u86d9",code:142}},v=null,s=null,E=null,m=/\[\/([\u4e00-\u9fa5OKN]{1,3})\]/g,P=RegExp("/("+D.join("|")+")","g"),l=false,G=false,u,O,d,w,h,C,I,L=null,J=15;t=13;var H=function(b){return b?b.replace(m,function(b,j){var f=a.array.indexOf(B,j);return f>-1?'<img class="face" title="'+
j+'" src="http://0.web.qstatic.com/webqqpic/style/face/'+f+'.gif" alt="'+("[/"+j+"]")+'" rel="face">':b}):b},Q=function(a){return a.replace(/\[\/([\u4e00-\u9fa5OKN]{1,3})\]/gi,function(a,b){var f=y[b];return f?String.fromCharCode(20)+String.fromCharCode(f.code):a})};(function(){v||(v={},a.array.forEach(B,function(a,b){v[a]=b}));s||(s={},a.array.forEach(D,function(a,b){s[a]=b+1}));if(!E){E=[];for(var b in y)E[y[b].code-0]=b}})();return{show:function(a){G?d&&d.innerHTML==""?i(a||{}):c(a):i(a||{})},
hide:A,isShow:function(){return l},code2Img:H,code2LnImg:function(a){return a?a.replace(P,function(a,b){var f=s[b];if(!f&&b.length>2){do b=b.substring(0,b.length-1),f=s[b];while(!f&&b.length>2)}return f?(f="http://imgcache.qq.com/club/item/indivsign/itemlist/$folder$/24_$id$.png".replace("$id$",f).replace("$folder$",f%10),'<img width=20 height=20 class="face ln_face" title="'+b+'" src="'+f+'" alt="'+("[/"+b+"]")+'" rel="face">'):a}):a},img2Code:function(a){return a?"[/"+a.title+"]":""},move:function(a,
k){d.style.left=parseInt(d.style.left)+a+"px";d.style.top=parseInt(d.style.top)+k+"px"},getPanelSize:function(){return{height:205,width:417}},hasFace:function(a){var k=false,j=null,f="";if(j=a.match(m))for(var a=0,h=j.length;a<h;a++)if(f=j[a],f=f.substring(2,f.length-1),typeof v[f]!=="undefined"){k=true;break}return k},isFace:function(a){return a.getAttribute("rel")==="face"},imgs2Code:function(a){return a.replace(/<img.+?\/>/gi,function(a){var b=a.match(/alt="(\[\/[\u4e00-\u9fa5OKN]{1,3}\])"/);return b?
b[1]:a})},faceCode2MoblieCode:Q,moblieCode2FaceCode:function(a){return a.replace(/\u0014(.)/gi,function(a,b){var f=E[parseInt(b?b.charCodeAt(0):b)];return f?"[/"+f+"]":a})},moblieCode2Img:function(a){return a.replace(/\u0014(.)/gi,function(a,b){var f=E[parseInt(b?b.charCodeAt(0):b)];return f?H("[/"+f+"]"):a})},imgs2MoblieCode:function(a){return a.replace(/<img.+?\/>/gi,function(a){var b=a.match(/alt="(\[\/[\u4e00-\u9fa5OKN]{1,3}\])"/);return b?Q(b[1]):a})},moblieCode2Text:function(a){return a.replace(/\u0014(.)/gi,
function(a,b){var f=E[parseInt(b?b.charCodeAt(0):b)];return f?"/"+f:a})}}}();return e});(function(a,e){typeof define==="function"&&define.amd?define("xss",e):a.XSS=e()})(this,function(){function a(a,i,m){if(F.test(i))return"";var e=(a=D[a][i])&&a.regexp,l=a&&a["default"];if(i==="href"||i==="src"){x.lastIndex=0;if(x.test(m))return l||"#";r.lastIndex=0;if(r.test(m))return l||"#";c.lastIndex=0;if(!c.test(m))return l||"#";return e&&(e.lastIndex=0,!e.test(m))?l||"#":m}else if(a||y[i]){p.lastIndex=0;if(p.test(m))return l||
"";z.lastIndex=0;if(z.test(m))return l||"";return i==="style"&&(o.lastIndex=0,o.test(m))?l||"":m}return""}var e=/</g,t=/>/g,i=/<(\/)*([a-zA-Z0-9_:\.\-]+)([^>a-zA-Z0-9_:\.\-]+[^>]*)*>/ig,q=/[^>a-zA-Z0-9_:\.\-]*([a-zA-Z0-9_:\.\-]+)=[\"\']?([^\"\'\s>]*)[\"\']?/ig,F=/[^>a-zA-Z0-9_:\.\-]/ig,x=/\/\*|\*\//mg,r=/^[\s"'`]*((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/ig,p=/\/\*|\*\//mg,z=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/ig,
o=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n/ig,c=RegExp("((news|telnet|nttp|file|http|ftp|https)://){1}(([-A-Za-z0-9]+(\\.[-A-Za-z0-9]+)*(\\.[-A-Za-z]{2,5}))|([0-9]{1,3}(\\.[0-9]{1,3}){3}))(:[0-9]*)?(/[-A-Za-z0-9_\\$\\.\\+\\!\\*\\(\\),;:@&=\\?/~\\#\\%]*)*","gi"),A=RegExp("(?:[^\\'\\\"]|^|s+)((((news|telnet|nttp|file|http|ftp|https)://)|(www\\.))(([-A-Za-z0-9]+(\\.[-A-Za-z0-9]+)*(\\.[-A-Za-z]{2,5}))|([0-9]{1,3}(\\.[0-9]{1,3}){3}))(:[0-9]*)?(/[-A-Za-z0-9_\\$\\.\\+\\!\\*\\(\\),;:@&=\\?/~\\#\\%]*)*)(?![^<]*</a>)",
"gi"),B=/^\s|\s$/ig,D={h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},hr:{},span:{},strong:{},b:{},i:{},br:{},p:{},pre:{},code:{},a:{target:{"default":"_blank"},href:true,title:true},img:{src:true,alt:true,title:true,rel:true},div:{},table:{border:true},tr:{rowspan:true},td:{colspan:true},th:{colspan:true},tbody:{},thead:{},ul:{},li:{},ol:{},dl:{},dt:{},em:{},cite:{},section:{},header:{},footer:{},blockquote:{},audio:{autoplay:true,controls:true,loop:true,preload:true,src:true},video:{autoplay:true,controls:true,
loop:true,preload:true,src:true}},y={width:true,height:true,style:true},v=function(a){if(!a)return true;for(var c in a)return false;return true};return{filter:function(c,p){var m={},o=0,l={};i.lastIndex=0;c=c.replace(i,function(c,h,d,i){var e=d||"";e=e.toLowerCase();_defaultWhiteList=D[e];if(!e||!_defaultWhiteList)return c||"";if(h)return l[e]&&l[e].length?(l[e].pop(),l[e].length||delete l[e],m[o]="</"+d+">","{%DataIndex_"+o++ +"%}"):"</"+d+">";else{h=(i||"").replace(B,"");(h==="/"||!h)&&v(_defaultWhiteList);
if(h)if(q.lastIndex=0,q.test(h)){q.lastIndex=0;var p=[];h.replace(q,function(c,d,b){c=d.toLowerCase();b=a(e,c,b);p.push(b?" "+c+'="'+b+'"':"")});h=p.join("")}else h="";if((h==="/"||!h)&&!v(_defaultWhiteList))return c||"";l[e]||(l[e]=[]);l[e].push(e);m[o]="<"+e+(h?" "+h:"")+">";return"{%DataIndex_"+o++ +"%}"}});p||(c=c.replace(e,"&lt;").replace(t,"&gt;"));var c=c.replace(/\{\%DataIndex_(\d+)\%\}/ig,function(a,c){return m[c]||""}).replace(A,function(a,c){var d="";a+="";a.length==c.length+1&&(d=a[0],
a=c);var e="",e=a.indexOf("://")==-1?"http://"+a:a;return d+'<a href="'+e+'" target="_blank">'+a+"</a>"}),r=[],u;for(u in l)if(!(u==="img"||u==="br"||u==="p"||u==="hr")){var x;if(x=l[u].length)for(var d=0;d<x;d++)r.push("</"+u+">")}r.length&&(c+=r.join(""));return c}}});(function(a,e){typeof define==="function"&&define.amd?define("emojiface",[],e):a.emojiface=e()})(this,function(){var a="0x00A9,0x00AE,0x203C,0x2049,0x2122,0x2139,0x2194,0x2195,0x2196,0x2197,0x2198,0x2199,0x21A9,0x21AA,0x231A,0x231B,0x23E9,0x23EA,0x23EB,0x23EC,0x23F0,0x23F3,0x24C2,0x25AA,0x25AB,0x25B6,0x25C0,0x25FB,0x25FC,0x25FD,0x25FE,0x2600,0x2601,0x260E,0x2611,0x2614,0x2615,0x261D,0x263A,0x2648,0x2649,0x264A,0x264B,0x264C,0x264D,0x264E,0x264F,0x2650,0x2651,0x2652,0x2653,0x2660,0x2663,0x2665,0x2666,0x2668,0x267B,0x267F,0x2693,0x26A0,0x26A1,0x26AA,0x26AB,0x26BD,0x26BE,0x26C4,0x26C5,0x26CE,0x26D4,0x26EA,0x26F2,0x26F3,0x26F5,0x26FA,0x26FD,0x2702,0x2705,0x2708,0x2709,0x270A,0x270B,0x270C,0x270F,0x2712,0x2714,0x2716,0x2728,0x2733,0x2734,0x2744,0x2747,0x274C,0x274E,0x2753,0x2754,0x2755,0x2757,0x2764,0x2795,0x2796,0x2797,0x27A1,0x27B0,0x27BF,0x2934,0x2935,0x2B05,0x2B06,0x2B07,0x2B1B,0x2B1C,0x2B50,0x2B55,0x3030,0x303D,0x3297,0x3299,0xD83C0xDC04,0xD83C0xDCCF,0xD83C0xDD70,0xD83C0xDD71,0xD83C0xDD7E,0xD83C0xDD7F,0xD83C0xDD8E,0xD83C0xDD91,0xD83C0xDD92,0xD83C0xDD93,0xD83C0xDD94,0xD83C0xDD95,0xD83C0xDD96,0xD83C0xDD97,0xD83C0xDD98,0xD83C0xDD99,0xD83C0xDD9A,0xD83C0xDE01,0xD83C0xDE02,0xD83C0xDE1A,0xD83C0xDE2F,0xD83C0xDE32,0xD83C0xDE33,0xD83C0xDE34,0xD83C0xDE35,0xD83C0xDE36,0xD83C0xDE37,0xD83C0xDE38,0xD83C0xDE39,0xD83C0xDE3A,0xD83C0xDE50,0xD83C0xDE51,0xD83C0xDF00,0xD83C0xDF01,0xD83C0xDF02,0xD83C0xDF03,0xD83C0xDF04,0xD83C0xDF05,0xD83C0xDF06,0xD83C0xDF07,0xD83C0xDF08,0xD83C0xDF09,0xD83C0xDF0A,0xD83C0xDF0B,0xD83C0xDF0C,0xD83C0xDF0D,0xD83C0xDF0E,0xD83C0xDF0F,0xD83C0xDF10,0xD83C0xDF11,0xD83C0xDF12,0xD83C0xDF13,0xD83C0xDF14,0xD83C0xDF15,0xD83C0xDF16,0xD83C0xDF17,0xD83C0xDF18,0xD83C0xDF19,0xD83C0xDF1A,0xD83C0xDF1B,0xD83C0xDF1C,0xD83C0xDF1D,0xD83C0xDF1E,0xD83C0xDF1F,0xD83C0xDF30,0xD83C0xDF31,0xD83C0xDF32,0xD83C0xDF33,0xD83C0xDF34,0xD83C0xDF35,0xD83C0xDF37,0xD83C0xDF38,0xD83C0xDF39,0xD83C0xDF3A,0xD83C0xDF3B,0xD83C0xDF3C,0xD83C0xDF3D,0xD83C0xDF3E,0xD83C0xDF3F,0xD83C0xDF40,0xD83C0xDF41,0xD83C0xDF42,0xD83C0xDF43,0xD83C0xDF44,0xD83C0xDF45,0xD83C0xDF46,0xD83C0xDF47,0xD83C0xDF48,0xD83C0xDF49,0xD83C0xDF4A,0xD83C0xDF4B,0xD83C0xDF4C,0xD83C0xDF4D,0xD83C0xDF4E,0xD83C0xDF4F,0xD83C0xDF50,0xD83C0xDF51,0xD83C0xDF52,0xD83C0xDF53,0xD83C0xDF54,0xD83C0xDF55,0xD83C0xDF56,0xD83C0xDF57,0xD83C0xDF58,0xD83C0xDF59,0xD83C0xDF5A,0xD83C0xDF5B,0xD83C0xDF5C,0xD83C0xDF5D,0xD83C0xDF5E,0xD83C0xDF5F,0xD83C0xDF60,0xD83C0xDF61,0xD83C0xDF62,0xD83C0xDF63,0xD83C0xDF64,0xD83C0xDF65,0xD83C0xDF66,0xD83C0xDF67,0xD83C0xDF68,0xD83C0xDF69,0xD83C0xDF6A,0xD83C0xDF6B,0xD83C0xDF6C,0xD83C0xDF6D,0xD83C0xDF6E,0xD83C0xDF6F,0xD83C0xDF70,0xD83C0xDF71,0xD83C0xDF72,0xD83C0xDF73,0xD83C0xDF74,0xD83C0xDF75,0xD83C0xDF76,0xD83C0xDF77,0xD83C0xDF78,0xD83C0xDF79,0xD83C0xDF7A,0xD83C0xDF7B,0xD83C0xDF7C,0xD83C0xDF80,0xD83C0xDF81,0xD83C0xDF82,0xD83C0xDF83,0xD83C0xDF84,0xD83C0xDF85,0xD83C0xDF86,0xD83C0xDF87,0xD83C0xDF88,0xD83C0xDF89,0xD83C0xDF8A,0xD83C0xDF8B,0xD83C0xDF8C,0xD83C0xDF8D,0xD83C0xDF8E,0xD83C0xDF8F,0xD83C0xDF90,0xD83C0xDF91,0xD83C0xDF92,0xD83C0xDF93,0xD83C0xDFA0,0xD83C0xDFA1,0xD83C0xDFA2,0xD83C0xDFA3,0xD83C0xDFA4,0xD83C0xDFA5,0xD83C0xDFA6,0xD83C0xDFA7,0xD83C0xDFA8,0xD83C0xDFA9,0xD83C0xDFAA,0xD83C0xDFAB,0xD83C0xDFAC,0xD83C0xDFAD,0xD83C0xDFAE,0xD83C0xDFAF,0xD83C0xDFB0,0xD83C0xDFB1,0xD83C0xDFB2,0xD83C0xDFB3,0xD83C0xDFB4,0xD83C0xDFB5,0xD83C0xDFB6,0xD83C0xDFB7,0xD83C0xDFB8,0xD83C0xDFB9,0xD83C0xDFBA,0xD83C0xDFBB,0xD83C0xDFBC,0xD83C0xDFBD,0xD83C0xDFBE,0xD83C0xDFBF,0xD83C0xDFC0,0xD83C0xDFC1,0xD83C0xDFC2,0xD83C0xDFC3,0xD83C0xDFC4,0xD83C0xDFC6,0xD83C0xDFC7,0xD83C0xDFC8,0xD83C0xDFC9,0xD83C0xDFCA,0xD83C0xDFE0,0xD83C0xDFE1,0xD83C0xDFE2,0xD83C0xDFE3,0xD83C0xDFE4,0xD83C0xDFE5,0xD83C0xDFE6,0xD83C0xDFE7,0xD83C0xDFE8,0xD83C0xDFE9,0xD83C0xDFEA,0xD83C0xDFEB,0xD83C0xDFEC,0xD83C0xDFED,0xD83C0xDFEE,0xD83C0xDFEF,0xD83C0xDFF0,0xD83D0xDC00,0xD83D0xDC01,0xD83D0xDC02,0xD83D0xDC03,0xD83D0xDC04,0xD83D0xDC05,0xD83D0xDC06,0xD83D0xDC07,0xD83D0xDC08,0xD83D0xDC09,0xD83D0xDC0A,0xD83D0xDC0B,0xD83D0xDC0C,0xD83D0xDC0D,0xD83D0xDC0E,0xD83D0xDC0F,0xD83D0xDC10,0xD83D0xDC11,0xD83D0xDC12,0xD83D0xDC13,0xD83D0xDC14,0xD83D0xDC15,0xD83D0xDC16,0xD83D0xDC17,0xD83D0xDC18,0xD83D0xDC19,0xD83D0xDC1A,0xD83D0xDC1B,0xD83D0xDC1C,0xD83D0xDC1D,0xD83D0xDC1E,0xD83D0xDC1F,0xD83D0xDC20,0xD83D0xDC21,0xD83D0xDC22,0xD83D0xDC23,0xD83D0xDC24,0xD83D0xDC25,0xD83D0xDC26,0xD83D0xDC27,0xD83D0xDC28,0xD83D0xDC29,0xD83D0xDC2A,0xD83D0xDC2B,0xD83D0xDC2C,0xD83D0xDC2D,0xD83D0xDC2E,0xD83D0xDC2F,0xD83D0xDC30,0xD83D0xDC31,0xD83D0xDC32,0xD83D0xDC33,0xD83D0xDC34,0xD83D0xDC35,0xD83D0xDC36,0xD83D0xDC37,0xD83D0xDC38,0xD83D0xDC39,0xD83D0xDC3A,0xD83D0xDC3B,0xD83D0xDC3C,0xD83D0xDC3D,0xD83D0xDC3E,0xD83D0xDC40,0xD83D0xDC42,0xD83D0xDC43,0xD83D0xDC44,0xD83D0xDC45,0xD83D0xDC46,0xD83D0xDC47,0xD83D0xDC48,0xD83D0xDC49,0xD83D0xDC4A,0xD83D0xDC4B,0xD83D0xDC4C,0xD83D0xDC4D,0xD83D0xDC4E,0xD83D0xDC4F,0xD83D0xDC50,0xD83D0xDC51,0xD83D0xDC52,0xD83D0xDC53,0xD83D0xDC54,0xD83D0xDC55,0xD83D0xDC56,0xD83D0xDC57,0xD83D0xDC58,0xD83D0xDC59,0xD83D0xDC5A,0xD83D0xDC5B,0xD83D0xDC5C,0xD83D0xDC5D,0xD83D0xDC5E,0xD83D0xDC5F,0xD83D0xDC60,0xD83D0xDC61,0xD83D0xDC62,0xD83D0xDC63,0xD83D0xDC64,0xD83D0xDC65,0xD83D0xDC66,0xD83D0xDC67,0xD83D0xDC68,0xD83D0xDC69,0xD83D0xDC6A,0xD83D0xDC6B,0xD83D0xDC6C,0xD83D0xDC6D,0xD83D0xDC6E,0xD83D0xDC6F,0xD83D0xDC70,0xD83D0xDC71,0xD83D0xDC72,0xD83D0xDC73,0xD83D0xDC74,0xD83D0xDC75,0xD83D0xDC76,0xD83D0xDC77,0xD83D0xDC78,0xD83D0xDC79,0xD83D0xDC7A,0xD83D0xDC7B,0xD83D0xDC7C,0xD83D0xDC7D,0xD83D0xDC7E,0xD83D0xDC7F,0xD83D0xDC80,0xD83D0xDC81,0xD83D0xDC82,0xD83D0xDC83,0xD83D0xDC84,0xD83D0xDC85,0xD83D0xDC86,0xD83D0xDC87,0xD83D0xDC88,0xD83D0xDC89,0xD83D0xDC8A,0xD83D0xDC8B,0xD83D0xDC8C,0xD83D0xDC8D,0xD83D0xDC8E,0xD83D0xDC8F,0xD83D0xDC90,0xD83D0xDC91,0xD83D0xDC92,0xD83D0xDC93,0xD83D0xDC94,0xD83D0xDC95,0xD83D0xDC96,0xD83D0xDC97,0xD83D0xDC98,0xD83D0xDC99,0xD83D0xDC9A,0xD83D0xDC9B,0xD83D0xDC9C,0xD83D0xDC9D,0xD83D0xDC9E,0xD83D0xDC9F,0xD83D0xDCA0,0xD83D0xDCA1,0xD83D0xDCA2,0xD83D0xDCA3,0xD83D0xDCA4,0xD83D0xDCA5,0xD83D0xDCA6,0xD83D0xDCA7,0xD83D0xDCA8,0xD83D0xDCA9,0xD83D0xDCAA,0xD83D0xDCAB,0xD83D0xDCAC,0xD83D0xDCAD,0xD83D0xDCAE,0xD83D0xDCAF,0xD83D0xDCB0,0xD83D0xDCB1,0xD83D0xDCB2,0xD83D0xDCB3,0xD83D0xDCB4,0xD83D0xDCB5,0xD83D0xDCB6,0xD83D0xDCB7,0xD83D0xDCB8,0xD83D0xDCB9,0xD83D0xDCBA,0xD83D0xDCBB,0xD83D0xDCBC,0xD83D0xDCBD,0xD83D0xDCBE,0xD83D0xDCBF,0xD83D0xDCC0,0xD83D0xDCC1,0xD83D0xDCC2,0xD83D0xDCC3,0xD83D0xDCC4,0xD83D0xDCC5,0xD83D0xDCC6,0xD83D0xDCC7,0xD83D0xDCC8,0xD83D0xDCC9,0xD83D0xDCCA,0xD83D0xDCCB,0xD83D0xDCCC,0xD83D0xDCCD,0xD83D0xDCCE,0xD83D0xDCCF,0xD83D0xDCD0,0xD83D0xDCD1,0xD83D0xDCD2,0xD83D0xDCD3,0xD83D0xDCD4,0xD83D0xDCD5,0xD83D0xDCD6,0xD83D0xDCD7,0xD83D0xDCD8,0xD83D0xDCD9,0xD83D0xDCDA,0xD83D0xDCDB,0xD83D0xDCDC,0xD83D0xDCDD,0xD83D0xDCDE,0xD83D0xDCDF,0xD83D0xDCE0,0xD83D0xDCE1,0xD83D0xDCE2,0xD83D0xDCE3,0xD83D0xDCE4,0xD83D0xDCE5,0xD83D0xDCE6,0xD83D0xDCE7,0xD83D0xDCE8,0xD83D0xDCE9,0xD83D0xDCEA,0xD83D0xDCEB,0xD83D0xDCEC,0xD83D0xDCED,0xD83D0xDCEE,0xD83D0xDCEF,0xD83D0xDCF0,0xD83D0xDCF1,0xD83D0xDCF2,0xD83D0xDCF3,0xD83D0xDCF4,0xD83D0xDCF5,0xD83D0xDCF6,0xD83D0xDCF7,0xD83D0xDCF9,0xD83D0xDCFA,0xD83D0xDCFB,0xD83D0xDCFC,0xD83D0xDD00,0xD83D0xDD01,0xD83D0xDD02,0xD83D0xDD03,0xD83D0xDD04,0xD83D0xDD05,0xD83D0xDD06,0xD83D0xDD07,0xD83D0xDD09,0xD83D0xDD0A,0xD83D0xDD0B,0xD83D0xDD0C,0xD83D0xDD0D,0xD83D0xDD0E,0xD83D0xDD0F,0xD83D0xDD10,0xD83D0xDD11,0xD83D0xDD12,0xD83D0xDD13,0xD83D0xDD14,0xD83D0xDD15,0xD83D0xDD16,0xD83D0xDD17,0xD83D0xDD18,0xD83D0xDD19,0xD83D0xDD1A,0xD83D0xDD1B,0xD83D0xDD1C,0xD83D0xDD1D,0xD83D0xDD1E,0xD83D0xDD1F,0xD83D0xDD20,0xD83D0xDD21,0xD83D0xDD22,0xD83D0xDD23,0xD83D0xDD24,0xD83D0xDD25,0xD83D0xDD26,0xD83D0xDD27,0xD83D0xDD28,0xD83D0xDD29,0xD83D0xDD2A,0xD83D0xDD2B,0xD83D0xDD2C,0xD83D0xDD2D,0xD83D0xDD2E,0xD83D0xDD2F,0xD83D0xDD30,0xD83D0xDD31,0xD83D0xDD32,0xD83D0xDD33,0xD83D0xDD34,0xD83D0xDD35,0xD83D0xDD36,0xD83D0xDD37,0xD83D0xDD38,0xD83D0xDD39,0xD83D0xDD3A,0xD83D0xDD3B,0xD83D0xDD3C,0xD83D0xDD3D,0xD83D0xDD50,0xD83D0xDD51,0xD83D0xDD52,0xD83D0xDD53,0xD83D0xDD54,0xD83D0xDD55,0xD83D0xDD56,0xD83D0xDD57,0xD83D0xDD58,0xD83D0xDD59,0xD83D0xDD5A,0xD83D0xDD5B,0xD83D0xDD5C,0xD83D0xDD5D,0xD83D0xDD5E,0xD83D0xDD5F,0xD83D0xDD60,0xD83D0xDD61,0xD83D0xDD62,0xD83D0xDD63,0xD83D0xDD64,0xD83D0xDD65,0xD83D0xDD66,0xD83D0xDD67,0xD83D0xDDFB,0xD83D0xDDFC,0xD83D0xDDFD,0xD83D0xDDFE,0xD83D0xDDFF,0xD83D0xDE00,0xD83D0xDE01,0xD83D0xDE02,0xD83D0xDE03,0xD83D0xDE04,0xD83D0xDE05,0xD83D0xDE06,0xD83D0xDE07,0xD83D0xDE08,0xD83D0xDE09,0xD83D0xDE0A,0xD83D0xDE0B,0xD83D0xDE0C,0xD83D0xDE0D,0xD83D0xDE0E,0xD83D0xDE0F,0xD83D0xDE10,0xD83D0xDE11,0xD83D0xDE12,0xD83D0xDE13,0xD83D0xDE14,0xD83D0xDE15,0xD83D0xDE16,0xD83D0xDE17,0xD83D0xDE18,0xD83D0xDE19,0xD83D0xDE1A,0xD83D0xDE1B,0xD83D0xDE1C,0xD83D0xDE1D,0xD83D0xDE1E,0xD83D0xDE1F,0xD83D0xDE20,0xD83D0xDE21,0xD83D0xDE22,0xD83D0xDE23,0xD83D0xDE24,0xD83D0xDE25,0xD83D0xDE26,0xD83D0xDE27,0xD83D0xDE28,0xD83D0xDE29,0xD83D0xDE2A,0xD83D0xDE2B,0xD83D0xDE2C,0xD83D0xDE2D,0xD83D0xDE2E,0xD83D0xDE2F,0xD83D0xDE30,0xD83D0xDE31,0xD83D0xDE32,0xD83D0xDE33,0xD83D0xDE34,0xD83D0xDE35,0xD83D0xDE36,0xD83D0xDE37,0xD83D0xDE38,0xD83D0xDE39,0xD83D0xDE3A,0xD83D0xDE3B,0xD83D0xDE3C,0xD83D0xDE3D,0xD83D0xDE3E,0xD83D0xDE3F,0xD83D0xDE40,0xD83D0xDE45,0xD83D0xDE46,0xD83D0xDE47,0xD83D0xDE48,0xD83D0xDE49,0xD83D0xDE4A,0xD83D0xDE4B,0xD83D0xDE4C,0xD83D0xDE4D,0xD83D0xDE4E,0xD83D0xDE4F,0xD83D0xDE80,0xD83D0xDE81,0xD83D0xDE82,0xD83D0xDE83,0xD83D0xDE84,0xD83D0xDE85,0xD83D0xDE86,0xD83D0xDE87,0xD83D0xDE88,0xD83D0xDE89,0xD83D0xDE8A,0xD83D0xDE8C,0xD83D0xDE8D,0xD83D0xDE8E,0xD83D0xDE8F,0xD83D0xDE90,0xD83D0xDE91,0xD83D0xDE92,0xD83D0xDE93,0xD83D0xDE94,0xD83D0xDE95,0xD83D0xDE96,0xD83D0xDE97,0xD83D0xDE98,0xD83D0xDE99,0xD83D0xDE9A,0xD83D0xDE9B,0xD83D0xDE9C,0xD83D0xDE9D,0xD83D0xDE9E,0xD83D0xDE9F,0xD83D0xDEA0,0xD83D0xDEA1,0xD83D0xDEA2,0xD83D0xDEA3,0xD83D0xDEA4,0xD83D0xDEA5,0xD83D0xDEA6,0xD83D0xDEA7,0xD83D0xDEA8,0xD83D0xDEA9,0xD83D0xDEAA,0xD83D0xDEAB,0xD83D0xDEAC,0xD83D0xDEAD,0xD83D0xDEAE,0xD83D0xDEAF,0xD83D0xDEB0,0xD83D0xDEB1,0xD83D0xDEB2,0xD83D0xDEB3,0xD83D0xDEB4,0xD83D0xDEB5,0xD83D0xDEB6,0xD83D0xDEB7,0xD83D0xDEB8,0xD83D0xDEB9,0xD83D0xDEBA,0xD83D0xDEBB,0xD83D0xDEBC,0xD83D0xDEBD,0xD83D0xDEBE,0xD83D0xDEBF,0xD83D0xDEC0,0xD83D0xDEC1,0xD83D0xDEC2,0xD83D0xDEC3,0xD83D0xDEC4,0xD83D0xDEC5,0x00230x20E3,0x00300x20E3,0x00310x20E3,0x00320x20E3,0x00330x20E3,0x00340x20E3,0x00350x20E3,0x00360x20E3,0x00370x20E3,0x00380x20E3,0x00390x20E3,0xD83C0xDDE80xD83C0xDDF3,0xD83C0xDDE90xD83C0xDDEA,0xD83C0xDDEA0xD83C0xDDF8,0xD83C0xDDEB0xD83C0xDDF7,0xD83C0xDDEC0xD83C0xDDE7,0xD83C0xDDEE0xD83C0xDDF9,0xD83C0xDDEF0xD83C0xDDF5,0xD83C0xDDF00xD83C0xDDF7,0xD83C0xDDF70xD83C0xDDFA,0xD83C0xDDFA0xD83C0xDDF8".split(",");
emojiUTF16Reg=[];imgReg=/<img.+?rel="emoji".+?name="([\w]+?)".+?\/>/gi;for(var e=0;e<a.length;e++)emojiUTF16Reg.push(RegExp(a[e].replace(/0x/g,"\\u"),"g"));var t=function(a){return a.replace(imgReg,function(a,e){for(var i=e.split("0x"),r=[],p=1;p<i.length;p++)r.push(parseInt(i[p],16));return String.fromCharCode.apply(void 0,r)})};return{code2Img:function(e){for(var q=0;q<emojiUTF16Reg.length;q++)e=e.replace(emojiUTF16Reg[q],'<img alt="@" height="24" width="24" src="http://qplus3.idqqimg.com/qun/jslib/res/ios_emoji/'+
a[q]+'.png" rel="emoji" name="'+a[q]+'" />');return e},imgs2Code:function(a){return t(a)}}});define("home","jquery,modules/common/js/reportPatchJquery,modules/common/js/db,commonapi,htmlEncode,face,xss,emojiface".split(","),function(a,e,t,i,q,F,x,r){var p,z,o,c,A,B,D,y,v;function s(g){var n=a("#group_master .js_visitor_name").add("#group_admin_list .js_visitor_name");t.nicks({param:{u:g.join("-")},succ:function(g){var b={};(g.ns||[]).forEach(function(a){b[a.u]=a.n});n.each(function(g,n){var V=a(n),
c=V.attr("uin");(c=b[c])&&V.html(c).prop("title",a("<span>"+c+"</span>").text())})},err:function(){}})}function E(a,n){return a.names&&a.names[n]||a.gAdminsName&&a.gAdminsName[n]||a.remarks&&a.remarks[n]||a.ns&&a.ns[n]||n}function m(a,n){n=n||function(){};o!=4?n(a):S[a]?n(S[a]):t.get_uin({param:{u:a,gc:c,useCache:false},succ:function(b){S[a]=b.u;n(b.u)},err:function(){}})}function P(g){TRecord.push("get_group_info","start");var n=new Date-0;t.get_group_info({param:{gc:c,useCache:A?false:true},succ:function(b){A=
false;p=b;console.log("home get_group_info err!");B++;D=b.gOwner;y=[b.gOwner];l(b);B===1&&(TRecord.push("get_group_info","end"),TRecord.report2("flag1=7809&flag2=1&flag3=56","get_group_info",{end:"16"}),window.postMessage(JSON.stringify({event:"get_group_info",from:"Home",time:new Date-0-n}),"http://qinfo.clt.qq.com"));var c=b.gOwner,e=[c],d="",f="",h=b.gAdmins||[],i=[];y=y.concat(b.gAdmins);d=E(b,c);d==c&&i.push(c);var f='<div class="visitor_item group_admin" id="visitor_item_'+c+'" uin="'+c+'">\t\t\t\t\t\t\t\t<img class="visitor_avator js_avatar js_show_profile" src="http://3.url.cn/qun/qinfo_v2/modules/profile/img/profile_default_head.png" width="30" height="30" uin='+
c+' />\t\t\t\t\t\t\t\t<span class="visitor_name js_visitor_name js_show_profile copyable" title="'+d+'" alt="'+d+'" uin='+c+">"+d+'</span>\t\t\t\t\t\t\t\t<span class="chat js_chat" uin='+c+"></span>\t\t\t\t\t\t\t</div>",j=a("#visitor_item_"+c);j.length?d!=c&&a(".js_visitor_name",j).html(d):a("#group_master").html(f);if(h.filter(function(a){return a!=c}).length>=1){var k=[],m=[],f="";h.forEach(function(a){a!=c&&(e.push(a),m.push(a),d=E(b,a),k.push(d),d==a&&i.push(a),f+='<div class="visitor_item group_admin" id="visitor_item_'+
a+'" tabindex="0" uin="'+a+'">\t\t\t\t\t\t\t\t\t<img class="visitor_avator js_avatar js_show_profile" src="http://3.url.cn/qun/qinfo_v2/modules/profile/img/profile_default_head.png" width="30" height="30" uin='+a+' />\t\t\t\t\t\t\t\t\t<span class="visitor_name js_visitor_name js_show_profile copyable" title="'+d+'" alt="'+d+'" uin='+a+">"+d+'</span>\t\t\t\t\t\t\t\t\t<span class="chat js_chat" uin='+a+"></span>\t\t\t\t\t\t\t\t</div>")});a("#group_admin").show();var o=true;a("#group_admin_list .group_admin").length==
m.length?(m.forEach(function(g){a("#visitor_item_"+g).length||(o=false)}),o?(m.forEach(function(g,b){g!=k[b]&&a("#visitor_item_"+g+" .js_visitor_name").html(k[b])}),a("#group_admin_list").show()):a("#group_admin_list").html(f).show()):a("#group_admin_list").html(f).show()}else a("#group_admin").hide(),a("#group_admin_list").hide();i.length&&s(i);t.getImages({param:{qq:{size:40,ls:e}},succ:function(n){console.log("home getImages succ!");var n=n.qq||{},c;for(c in n)a("#visitor_item_"+c+" .js_avatar ").prop("src",
n[c].u.replace(/&amp;/g,"&"));g&&g(null,b)},err:function(){console.log("home getImages succ!");g&&g(null,b)}});W.succ(b.photo||{});X.succ(b.share||{})},err:function(a){W.err(a.photo||{});X.err(a.share||{});console.log("home get_group_info err!")}})}function l(g){g.gRIntro?(g=g.gRIntro||"\u7fa4\u4e3b\u5f88\u61d2\uff0c\u4ec0\u4e48\u90fd\u6ca1\u6709\u7559\u4e0b",a("#group_intro").html('<em class="element-invisible">\u7fa4\u4ecb\u7ecd\u662f</em><div id="group_rintro" style="font-size: 12px;font-family: \'\u5fae\u8f6f\u96c5\u9ed1\'">'+
x.filter(r.code2Img(F.moblieCode2Img(F.code2Img(q.decode(q.decodeForMobile(g))))))+"</div>").attr("aria-label","\u7fa4\u4ecb\u7ecd\u662f:"+x.filter(r.code2Img(F.moblieCode2Img(F.code2Img(q.decode(q.decodeForMobile(g)))))))):(g=g.gIntro||"\u7fa4\u4e3b\u5f88\u61d2\uff0c\u4ec0\u4e48\u90fd\u6ca1\u6709\u7559\u4e0b",a("#group_intro").html('<em class="element-invisible">\u7fa4\u4ecb\u7ecd\u662f</em>'+x.filter(g)))}function G(a){var b=document.createElement("iframe");b.src=a;document.body.appendChild(b)}
function u(){window.jubao_onClose=function(){var a=document.getElementById("jubao_photo_container");a&&a.parentNode&&a.parentNode.removeChild(a)}}function O(){a("#not_open_join_group").bind("click",function(){i.joinGroup(c);a.report({aId:1119,flag1:c});j.gdtJoinGroupClick&&j.gdtJoinGroupClick("thumb")});a("#group_master").add("#group_admin_list").delegate(".js_show_profile","click",function(){var g=a(this).attr("uin");m(g,function(a){i.openContactInfoCard(a,1)})});a("#group_master").add("#group_admin_list").delegate(".group_admin",
"mouseenter",function(){var g=a(this).attr("uin");N[g]=setTimeout(function(){console.log(g);m(g)},50)});a("#group_master").add("#group_admin_list").delegate(".group_admin","mouseleave",function(){var g=a(this).attr("uin");N[g]&&(clearTimeout(N[g]),N[g]=null)});a("#share_container").delegate(".js_share_item","click",function(){document.getElementsByClassName("share_no_file")[0]?K(14):K(12);console.log("js_share_item clicked");if(h())i.confirm(1,"\u6e29\u99a8\u63d0\u793a","\u4e0b\u8f7d\u5171\u4eab\u6587\u4ef6\uff0c\u8bf7\u5148\u52a0\u7fa4\uff01").ret&&
(i.joinGroup(c),a.report({aId:1121,flag1:c}));else if(v){var g=a(this);t.get_group_share_download({param:{gc:c,file_name:g.attr("n"),file_path:g.attr("f"),bus_id:g.attr("b")},succ:function(a){G(a.url)},err:function(a){switch(a.ec){case 201:i.alert(1,"\u6e29\u99a8\u63d0\u793a","\u975e\u7fa4\u6210\u5458\u65e0\u6cd5\u4e0b\u8f7d\u7fa4\u6587\u4ef6\uff01");break;case 202:i.confirm(2,"\u6e29\u99a8\u63d0\u793a","\u6587\u4ef6\u6709\u75c5\u6bd2\uff0c\u786e\u8ba4\u7ee7\u7eed\u4e0b\u8f7d\u5417\uff1f").ret&&G(a.url);
break;case 203:G(a.url);break;case 204:i.alert(1,"\u6e29\u99a8\u63d0\u793a","\u4e0b\u8f7d\u5931\u8d25\uff0c\u8be5\u6587\u4ef6\u4e0d\u5b58\u5728\uff01");break;default:i.alert(1,"\u6e29\u99a8\u63d0\u793a","\u83b7\u53d6\u4e0b\u8f7d\u94fe\u63a5\u5931\u8d25\uff01")}}})}else d("http://qun.qzone.qq.com/group#!/"+c+"/share")});a("#photo_container").delegate(".js_share_photo","click",function(g){document.getElementsByClassName("share_no_photo")[0]?K(13):K(11);if(h())i.confirm(1,"\u6e29\u99a8\u63d0\u793a",
"\u67e5\u770b\u56fe\u7247\u8be6\u60c5\uff0c\u8bf7\u5148\u52a0\u7fa4\uff01").ret&&(i.joinGroup(c),a.report({aId:1120,flag1:c}));else{var b=a(g.target).attr("src");b?m(c,function(){var a=b.split("/"),g=a.length,a="http://qzs.qq.com/qzone/photo/v7/page/photo.html#init=photo.v7/common/viewer2/index"+["&appid=421","&ownerUin="+D,"&from=newphoto2&useqzfl=1&useinterface=1&inqq=1","&topicId="+c+"_"+a[g-3],"&picKey="+a[g-2],"&pre="+b,"&preEncode=1"].join("");try{window.external.OpenViewer(a)}catch(d){}}):
d("http://qun.qzone.qq.com/group#!/"+c+"/photo","_blank")}}).delegate(".js_img_jubao","click",function(g){var b;b=a(g.target).parents(".js_share_photo_item").attr("src").split("/");var d=b.length;g=b[d-3];b=b[d-2];var d=j.cookie.uin(),f=c,e=document.getElementById("jubao_photo_container");if(!e)e=document.createElement("div"),e.id="jubao_photo_container",e.className="jubao_photo_container",document.body.appendChild(e);var h=document.createElement("iframe");h.src="http://jubao.qq.com/cn/jubao?appname=im&subapp=gzphoto&jubaotype=picture&uin="+
d+"&guin="+f+"&photoid="+b+"&albumid="+g;e.appendChild(h);a.report({aId:1181,flag1:c})}).delegate(".js_share_photo_item","mouseenter mouseleave",function(g){var g=g.type,b=a(this).find(".js_img_jubao");g==="mouseenter"?o!=1&&b.fadeIn():g==="mouseleave"&&b.fadeOut()});a("#jump_to_photo").bind("click",function(){d("http://qun.qzone.qq.com/group#!/"+c+"/photo","_blank")});a("#jump_to_share").bind("click",function(){d("http://qun.qzone.qq.com/group#!/"+c+"/share","_blank")})}function d(a){a="http://ptlogin2.qq.com/jump?clientuin="+
i.getSelfUin()+"&clientkey="+i.getClientKey().clientKey+"&u1="+encodeURIComponent(a);window.open(a)}function w(a){a=eval("("+a.data+")");switch(a.event||a.fn){case "OnGroupDataFetched":l(a.data);break;case "OnAdminChange":A=true}}function h(){return o!=1&&o!=2&&o!=3}function C(){a("#photo_container .js_ajust_photo").each(function(a,b){b.complete?j.adjust(b,138,102):b.onload=function(){this.onload=null;j.adjust(b,138,102)}})}function I(){return!!j.hash.get("data").match(/from_(.+)/)}function L(){TRecord.push("app_lecture_resource",
"start");T.parallel([function(b){a.ajax({url:"http://ke.qq.com/cgi-bin/get_agency_new_course",type:"GET",dataType:"json",xhrFields:{withCredentials:true},data:{gcode:M.get("groupuin"),count:5},success:function(a){a.retcode===0?b(null,a.result):b(null,{items:[]});I()&&(TRecord.push("app_lecture_resource","get_group_class_info"),TRecord.report2("flag1=7809&flag2=1&flag3=56","app_lecture_resource",{get_group_class_info:"22"}))},error:function(){b(null,{items:[]})}})},function(a){require(["app_lecture"],
function(b){a(null,b);if(I())TRecord.push("app_lecture_resource","app_lecture_js_loaded"),TRecord.report2("flag1=7809&flag2=1&flag3=56","app_lecture_resource",{app_lecture_js_loaded:"23"}),(new Image).src=["http://jsreport.qq.com/cgi-bin/report?id=167&rs=0-0-390529","r="+Math.random()].join("&")})}],function(b,c){var d=c[0],e=c[1];d.items.length?(a("#group_photo_container").slideUp(),a("#group_file_container").slideUp(),a("#group_not_open_container").slideUp()):(a("#group_photo_container").slideDown(),
a("#group_file_container").slideDown(),a("#group_not_open_container").slideDown());e&&e.show({parentNode:a("#group_app_lecture_container"),data:d})})}function J(){a("#photo_title").hide();a("#photo_container").hide();a("#share_title").hide();a("#share_container").hide();if(z&&p){var b=z,c=b.urls||[];c.length?(a("#not_open_pic_container").prop("className","not_open_pic_container js_has_photo"),a("#not_open_pic_container .js_img").prop("src",c[0].replace(/100$/,"200")),a("#not_open_pic_container .js_desc").html((b.total_num||
0)+"\u5f20\u7167\u7247")):(a("#not_open_pic_container").prop("className","not_open_pic_container js_no_photo"),a("#not_open_pic_container .js_desc").html("\u6682\u65e0\u7167\u7247"));b=p;c=b.ls||[];c.length?(a("#not_open_share_container").prop("className","not_open_share_container js_has_share"),a("#not_open_share_container .js_desc").html((b.total_num||0)+"\u4e2a\u6587\u4ef6"),b=c[0].n.match(/\.([^\.]+)$/),c="default",c=b?R[b[1].toLowerCase()]||"default":"default",a("#not_open_share_container .js_share_type").prop("className",
"share_pic "+c)):(a("#not_open_share_container").prop("className","not_open_share_container js_no_share"),a("#not_open_share_container .js_desc").html("\u6682\u65e0\u6587\u4ef6"));a("#not_open_content_new").show()}}function H(){a("#not_open_content_new").hide();a("#photo_title").show();a("#photo_container").show();a("#share_title").show();a("#share_container").show()}function Q(a){t.get_wpa_key({param:{gc:c,u:y.join("|")},succ:function(b){console.log("succ: get_wpa_key");a&&a(null,b)},err:function(){console.log("err: get_wpa_key")}})}
function b(b){a(".group_admin .js_chat").each(function(d,e){var f=a(e),h=f.attr("uin");b[h]?(a(".js_visitor_name",f.parent()).addClass("chat_with_wpa"),f.show()):(a(".js_visitor_name",f.parent()).removeClass("chat_with_wpa"),f.hide());a.report({aId:1130,flag1:c},"once")});a("#visitor .js_chat").on("click",function(){var d=a(this).attr("uin");window.open(decodeURIComponent(b[d]));a.report({aId:1064,flag1:c})})}function k(a){if(window.__group_info_fetched)return a();var b,c=function(){Y++>50?(clearTimeout(b),
b=k=null,a()):b=setTimeout(function(){window.__group_info_fetched?(clearTimeout(b),b=k=null,a()):c()},16)};c()}var j=window.Util,f=null,M={get:function(a){a=window.location.hash.match(RegExp("(#|&)"+a+"=([^&]*)(&|$)"));return!a?"":decodeURIComponent(a[2])},set:function(a){location.hash="#"+a}};y=[];A=false;D="";v=true;B=0;o=void 0;c=void 0;z=null;p=null;var U={zip:["zip","7z"],rar:["rar"],txt:["txt","html"],pic:"jpg,jpeg,bmp,gif,png,pic,tif,psd,ai,cdr".split(","),video:"avi,wmv,rm,rmvb,swf,mp4,mov,mpg".split(","),
music:"mp3,wma,wav,aif,au,ram,mid".split(","),exe:["exe"],word:["doc","docx","dot","wps","rtf"],excel:["xls","xlsx"],ppt:["ppt","pptx"],pdf:["pdf"]},R={};(function(){for(var a in U)U[a].forEach(function(b){R[b]=a})})();var K=function(b,c){var d={1:[0,1063],2:[0,1064],3:[0,1065],4:[0,1066],5:[0,1067],6:[0,1068],7:[0,1069],8:[0,1070],9:[0,1071],10:[0,1072],11:[0,1073],12:[0,1074],13:[0,1075],14:[0,1076],15:[0,1077],16:[0,1078],15:[0,1079],15:[0,1080],15:[0,1081]};a.report({mId:d[b][0],aId:d[b][1],value:typeof c==
"number"?c:1})},S={},N={},T=function(){return{parallel:function(a,b){for(var c=a.length,d=a.length,e=[],f=false,h=0;h<d;h++)(function(d){a[d](function(a,g){a?f||(f=true,b(a,e)):(c--,e[d]=g,c||b(null,e))})})(h)}}}(),X={succ:function(b){console.log("get_group_share succ!");p=b;var c=h();if(b.f!=1&&c)a("#info_container").addClass("not_open_to_none_member"),a("#not_open_share_desc").html((b.total_num||0)+"\u4e2a\u6587\u4ef6"),J();else{H();var d="";!b.ls||!b.ls.length?(v=false,d='<div class="share_item share_no_file_item js_share_item"><div class="share_no_file_icon"></div><div class="share_no_file_word">\u6682\u65e0\u6587\u4ef6</div></div>',
a("#share_container").html(d),c?a("#share_wording").html(""):a("#jump_to_share").hide()):(v=true,b.ls=b.ls.slice(0,3),b.ls.forEach(function(a){var b=a.n.match(/\.([^\.]+)$/);typeClass=b?R[b[1].toLowerCase()]||"default":"default";d+='<div class="share_item">\t\t\t\t\t\t\t\t\t<div class="share_pic js_share_item '+typeClass+'" n="'+a.n+'" f="'+a.f+'" b="'+a.b+'">\t\t\t\t\t\t\t\t\t\t<span class="share_download_arrow js_share_download"></span>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<span class="share_name copyable" title="'+
a.n+'">'+a.n+'</span>\t\t\t\t\t\t\t\t\t<span class="share_upload_size copyable">'+((a.s||0)>=1048576?((a.s||0)/1048576).toFixed(2)+"MB":((a.s||0)/1024).toFixed(2)+"KB")+"</span>\t\t\t\t\t\t\t\t</div>"}),a("#share_container").html(d),c||a("#jump_to_share").show())}},err:function(){console.log("get_group_share err!");var b="";a("#share_container").html('<div class="share_item js_share_item"><div class="share_pic share_no_file"></div></div>');a("#share_wording").html("(\u7cfb\u7edf\u7e41\u5fd9)")}},
W={succ:function(b){z=b;console.log("get_group_last_photo succ!");var c=h();if(b.f!=1&&c)a("#info_container").addClass("not_open_to_none_member"),a("#not_open_pic_desc").html((b.total_num||0)+"\u5f20\u7167\u7247"),J();else{H();var d="";!b.urls||!b.urls.length?(d='<div class="share_no_photo_item js_share_photo"><div class="share_no_photo_icon"></div><div class="share_no_photo_word">\u6682\u65e0\u56fe\u7247</div></div>',a("#photo_container").html(d),c?a("#photo_wording").html(""):a("#jump_to_photo").hide()):
(b.urls=b.urls.slice(0,3),b.urls.forEach(function(a){a=a.replace(/\/100\?/,"/200?");d+='<div class="share_photo_item js_share_photo_item" src="'+a+'">\t\t\t\t\t\t\t\t\t<img class="js_share_photo js_ajust_photo" src="'+a+'" />\t\t\t\t\t\t\t\t\t<div class="share_img_wrapper js_share_photo" src="'+a+'"></div>\t\t\t\t\t\t\t\t\t<span class="share_img_jubao js_img_jubao">\u4e3e\u62a5</span>\t\t\t\t\t\t\t\t</div>'}),a("#photo_container").html(d),c||a("#jump_to_photo").show(),C())}},err:function(){console.log("get_group_last_photo err!");
var b="";a("#photo_container").html('<div class="share_no_photo js_share_photo"></div>');a("#photo_wording").html("(\u7cfb\u7edf\u7e41\u5fd9)")}},Y=0;return{init:function(){if(!this.initialized)this.initialized=true,M.get("tab"),o=M.get("role"),c=M.get("groupuin"),t.genSampleAPI2({apiName:"get_wpa_key",cgiName:"qun_info/get_wpa_key"}),setTimeout(function(){K(9)},2E3),O(),window.addEventListener("message",w),u();z=p=null},show:function(d){this.init();f=d.parentNode;o==4?T.parallel([P],function(d,e){if(!d){var f=
e[0];Q(function(d,e){b(e);var g={event:"get_group_info_done",from:"Home",html:a("#container_home").html(),header:a("#header").html(),groupuin:c,data:f};setTimeout(function(){window.postMessage(JSON.stringify(g),"http://qinfo.clt.qq.com")},1500)})}}):T.parallel([P],function(b,d){if(!b){var e={event:"get_group_info_done",from:"Home",html:a("#container_home").html(),header:a("#header").html(),groupuin:c,data:f},f=d[0];setTimeout(function(){window.postMessage(JSON.stringify(e),"http://qinfo.clt.qq.com")},
1500)}});try{k(function(){var a=window._pre_fetch_cache[window.global_get_group_info];a&&a.data&&a.data.edu==1&&L()})}catch(e){console.debug(e)}window.addEventListener("message",w)},hide:function(){f&&(f=null)},destroy:function(){}}})})();
