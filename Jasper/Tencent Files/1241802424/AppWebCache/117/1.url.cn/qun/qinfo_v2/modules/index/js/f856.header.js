(function(d,e){typeof define==="function"&&define.amd?define(["modules/common/js/str","modules/common/js/util"],e):d.Header=e(d.Str,d.Util)})(this,function(d,e){var g,f;function c(a){var b=document.getElementById(a);b.css=function(a,c){b.style[a]=c};b.hide=function(){b.style.display="none"};b.show=function(){b.style.display=""};return b}function i(a){c("group_name").innerHTML='<span class="element-invisible">\u7fa4\u540d\u79f0\u662f</span><span class="qname" title="'+a.gName+'">'+(a.gName||"")+"</span>";
c("group_number").innerHTML='<em class="element-invisible">\u7fa4\u53f7\u662f</em>'+d.encodeHtml(g||"");a.classInfo?(c("group_class").innerHTML='<em class="element-invisible">\u7fa4\u5206\u7c7b\u662f</em>'+a.classInfo,c("group_class").css("display","inline-block")):c("group_class").css("display","none");if(a.gMaxMem)c("group_member_number").style.display="inline-block",c("header_cur_num").innerHTML=a.gMemNum||"",c("header_max_num").innerHTML=a.gMaxMem||"";var b=(a.pos||"").split("|");(b=b[b.length-
1])?(c("group_pos").innerHTML=b,c("group_pos").css("display","inline-block")):c("group_pos").css("display","none");a.auth?c("group_auth").css("display","inline-block"):c("group_auth").hide()}g=void 0;f=void 0;var h={OnStartDragMove:function(){try{window.external.StartDragMove()}catch(a){}},OnGetGroupBasicInfo:function(a){var b=null;try{b=JSON.parse(window.external.GetGroupBasicInfo(a+""))}catch(c){b={}}return b},OnRemoveLoading:function(){console.log("OnRemoveLoading called!");try{window.external.RemoveLoading()}catch(a){}}};
return{init:function(){function a(){var b=new Date-0,a=h.OnGetGroupBasicInfo(g);a==null&&(a={},Badjs("window.external.GetGroupBasicInfo("+g+")==null, from:header.js",window.location,0,356053,2));i(e.wrapClientBasicInfoToCGIFormate(a));var c=document.getElementById("avatar"),d=document.getElementById("group_avatar"),f=c.className;e.updateAvatar({img:document.getElementById("group_avatar"),onload:function(a){d.className+=" show";if(a<=40)f.indexOf("group_avatar_min")==-1&&(c.className+=" group_avatar_min");
else if(f.indexOf("group_avatar_min")!=-1)c.className=f.replace("group_avatar_min","")},onerror:function(){d.className+=" show"}});b=new Date-0-b;b>1E3&&Badjs("Header initHeader:"+b,window.location,0,366176,2)}g=e.hash.get("groupuin");f=e.hash.get("role");if(f==4)document.getElementById("container").className=document.getElementById("container").className+" no_nav";setTimeout(function(){a()},0);h.OnRemoveLoading();document.getElementById("drag_area").addEventListener("mousedown",function(a){a.button==
0&&h.OnStartDragMove()})},update:i}});
