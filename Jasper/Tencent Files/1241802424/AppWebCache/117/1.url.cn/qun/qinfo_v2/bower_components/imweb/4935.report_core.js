(function(k,i){typeof define==="function"&&define.amd?define([],i):k.report_core=i()})(this,function(){function k(a,c){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(a,c);for(var g=0,d=a.length;g<d;g++)if(a[g]===c)return g;return-1}var i,p,l=function(){return 0},m,j=[],q=[],n=function(a){(new Image).src=(a||p)+j.join("|_|")+"&r="+Math.random();j=[]},r="aId,v,mId,flag1,flag2,flag3,ver,rev".split(","),o=function(a,c,g){var d={},e,h,b=typeof a;if(b=="number")if(b=typeof c,b=="undefined"||
b=="string")d.v=1,g=c,e=l(a)+"-1-"+a;else{if(b=="number")d.v=c,e=l(a)+"-1-"+a}else if(b=="object"){d=a;a=d.mId;g=c;if(!("v"in d))d.v=1;if(!("aId"in d))d.aId=l(a);var c=[],f;for(f in d)e=k(r,f),e!=-1&&(c[e]=d[f]);e=c.join("-").replace(/-(?=-)/g,"-0");h=d.bId}if(h)j.length>0&&e&&(clearTimeout(m),n()),e&&(clearTimeout(m),j.push(e),url="http://jsreport.qq.com/cgi-bin/report?id="+h+"&rs=",n(url));else{if(g=="once"){if(k(q,a)!=-1)return;q.push(a)}e&&j.push(e);clearTimeout(m);g=="now"||a=="now"?n():m=setTimeout(function(){console.log("bid=============="+
h);var a="";h&&(a="http://jsreport.qq.com/cgi-bin/report?id="+h+"&rs=");n(a)},20)}};o.ReportFactory=function(){var a={aId:1,v:1,mId:1,flag1:1,flag2:1,flag3:1,ver:1,rev:1};return function(c){var c=c||{},g=c.config||{},d=c.getDefaultOptFn;return function(e,h){var b=g[e];if(b){if(typeof h==="object")for(var f in h)b[f]=h[f];if(c.bId)b.bId=c.bId;if(b){f={};typeof d==="function"&&(f=d(b));if(typeof b==="number")f.mId=b;else if(typeof b==="object"){for(var i in b)i in a&&(f[i]=b[i]);if(b.bId)f.bId=b.bId}o(f)}}}}}();
o.config=function(a){i=a.bId;p="http://jsreport.qq.com/cgi-bin/report"+(a.ctype?a.ctype:"")+"?id="+i+"&rs=";a.aId&&(l=a.aId)};return o});
