(function(a,d){typeof define==="function"&&define.amd?define(["simple","./InputSuggestion","./Select","./User","./ActionBar"],d):a.DetailTrigger=d(a.$,a.InputSuggestion,a.Select,a.User,a.ActionBar)})(this,function(a,d,f,i,j){var b=new a.oop.Class({init:function(b,g){var c=a.dom.queryClass("detail-trigger-ctn","div",b);c&&_catSelectWrap.removeChild(c);var c=a.dom.getNode("div",{"class":"detail-trigger-ctn"}),e=a.dom.getNode("div",{"class":"detail-trigger"});c.appendChild(e);var h=a.dom.getNode("div",
{"class":"detail-rich"});c.appendChild(h);b.appendChild(c);e.setAttribute("tabIndex",g.tabIndex!==void 0?g.tabIndex:"0");this.$ctn=c;this.$title=e;this.$popView=h;this.$title.dt=this;this.visible=false;this.$popView.style.display="none";a.e.add(this.$title,"click",a.oop.bind(this.onTitleClick,this));a.e.add(this.$popView,"click",function(a){a.stopPropagation();d.hideAll();f.hideAll()})},onTitleClick:function(a){this.toggle();a.stopPropagation()},toggle:function(){this.visible?this.hide():this.show()},
show:function(){this.$title.setAttribute("tabIndex","-1");this.$popView.style.display="block";this.visible=true;a.css.addClass(this.$ctn,"trigger-open");b.lastShown&&b.lastShown.hide();b.lastShown=this},hide:function(){this.$title.setAttribute("tabIndex","1");d.hideAll();f.hideAll();this.$popView.style.display="none";a.css.removeClass(this.$ctn,"trigger-open");this.visible=false;b.lastShown=null},fillTriggerContent:function(b){this.$title.innerHTML=a.str.encodeHtml(b);i.bSetDetail||j.enableSaveBtn()}});
b.hideAll=function(){b.lastShown&&b.lastShown.hide()};return b});
