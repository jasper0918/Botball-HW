(function(a,g){typeof define==="function"&&define.amd?define(["simple","../common/client","./MapManage"],g):a.LBS=g(a.$,a.Client,a.MapManage)})(this,function(a,g,h){var f={useCityName:false,setPseudoAddr:function(b,d,a){var c;if(b&&d){switch(b){case "\u540c\u5b66":(b=d.split(/[-\|]/))&&b.length>=2&&(c=b[1]);break;case "\u4e1a\u4e3b":c=d}if(c)this.seCityName=false}if(!c&&a&&(b=a.split("|"),a=b[0],b=b[3],a&&!b))c=h.convertToName(a),this.useCityName=true;if(c)f.pseudoAddr=c},set_lbs_html:function(b,
a){var a=a||{},e=a.canedit,c=typeof a.str==="string"?a.str:"",c=c?e?'<em class="lbs"></em>'+c+'<a class="check" aria-label="\u4fee\u6539\u7fa4\u5730\u70b9" title="\u4fee\u6539\u7fa4\u5730\u70b9" href="javascript:void(0)" tabIndex="-1" data-action="mod">\u4fee\u6539</a></span><a href="javascript:void(0)" class="del" aria-label="\u5220\u9664\u7fa4\u5730\u70b9" title="\u5220\u9664\u7fa4\u5730\u70b9" tabIndex="-1" data-action="del">\u6e05\u9664</a>':'<em class="lbs"></em>'+c+(this.useCityName?"":'<a class="check" aria-label="\u5728\u5730\u56fe\u4e0a\u67e5\u770b\u7fa4\u5730\u70b9" title="\u5728\u5730\u56fe\u4e0a\u67e5\u770b\u7fa4\u5730\u70b9" href="javascript:void(0)" tabIndex="-1" data-action="view">\u67e5\u770b</a>'):
e?'<em class="nolbs"></em><span class="gray new-ui-pos-hint">\u6dfb\u52a0\u5730\u7406\u4f4d\u7f6e\uff0c\u8ba9\u9644\u8fd1\u7684\u597d\u53cb\u80fd\u770b\u5230\u4f60\u7684\u7fa4\u3002</span><a class="check" aria-label="\u6dfb\u52a0\u7fa4\u5730\u70b9" href="javascript:void(0);" tabIndex="-1" data-action="add">\u6dfb\u52a0</a>':"-";b.innerHTML=c},get_lbs_str:function(a){var d=f.pseudoAddr||"";a||(a=h.getVal());a&&(a=a.split("|"),a.length===4&&a[3]&&(d=a[3]));return d}};f.LBSTip=function(){var b,d;return{init:function(e){typeof b===
"undefined"&&(b=parseInt(a.cookie.get("lbs_tip"),10));if(!b&&!f.get_lbs_str()){a.cookie.set("lbs_tip","1",null,"/qinfo_v2/modules/profile",17520);b=true;d=document.createElement("div");d.className="lbs-tip";d.innerHTML='            <h3>\u8ba9\u66f4\u591a\u9644\u8fd1\u7684\u4eba\u770b\u5230\u4f60\u7684\u7fa4\uff01</h3>            <p>\u6dfb\u52a0\u5730\u70b9\u540e\u4f60\u7684\u7fa4\u5c06\u4f1a\u5c55\u793a\u5728\u624b\u673aQQ<br>\u201c\u9644\u8fd1\u7684\u7fa4\u201d\u5217\u8868<a class="btn" href="javascript:void(0)">\u7acb\u5373\u6dfb\u52a0</a></p>            <a class="cls" href="javascript:void(0)"></a>';
e.appendChild(d);this.show();var c=this,e=a.dom.queryClass("cls","a",d);a.e.add(e,"click",function(){c.hide()});e=a.dom.queryClass("btn","a",d);a.e.add(e,"click",function(){var b=a("qun-loc-value");a.e.trigger(a.dom.queryClass("check","a",b),"click");c.hide()});a.oop.addObserver(f,"addLBS",function(){c.hide()})}},show:function(){a.css.show(d)},hide:function(){a.css.hide(d)}}}();return f});
