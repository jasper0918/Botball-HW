(function(a,e){typeof define==="function"&&define.amd?define(["simple"],e):a.initContextMenu=e(a.$)})(this,function(a){return function(){function e(){if(f){var b=window.getSelection();b.removeAllRanges();var a=document.createRange();a.selectNodeContents(f);b.addRange(a)}}var d=a("contextmenu"),f=null,h=document.body.clientWidth,i=document.body.clientHeight,g=a("copy-it"),j=a("select-all");a.e.add(a("profile-wrap"),"contextmenu",function(b){var c=b.target,e=a.css.hasClass(c,"copyable");if(!e&&c.parentNode&&
a.css.hasClass(c.parentNode,"copyable"))c=c.parentNode,e=true;e?(f=c,c=b.x,b=b.y,c+124>h&&(c=h-124),b+50>i&&(b=i-50),d.style.left=c+"px",d.style.top=b+"px",window.getSelection().toString()?a.css.removeClass(g,"disabled"):a.css.addClass(g,"disabled"),a.css.removeClass(d,"hidden")):(f=null,a.css.addClass(d,"hidden"))});a.e.add(document,"click",function(){f=null;a.css.addClass(d,"hidden")});d.onmousedown=function(b){var c=b.target;a.css.hasClass(c,"disabled")||(c===g?document.execCommand("copy"):c===
j&&e(),f=null,b.preventDefault())};d.onclick=function(b){a.css.hasClass(b.target,"disabled")&&b.stopPropagation()};d.oncontextmenu=function(b){a.css.hasClass(b.target,"disabled")||a.css.addClass(d,"hidden");b.preventDefault()};a.e.add(document,"keydown",function(b){var c=b.target.tagName.toLowerCase();c!=="input"&&c!=="textarea"&&b.ctrlKey&&b.keyCode===65?(e(),b.preventDefault()):b.keyCode===27&&(f=null,a.css.addClass(d,"hidden"))})}});
