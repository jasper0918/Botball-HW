(function(){function o(a){if("string"!=typeof a)return false;try{a=(JSON&&JSON.parse||function(a){return eval("("+a+")")})(a.replace(/[\u0000-\u001f]/g," "))}catch(b){return false}return a}function g(){return e===void 0&&(e=!c("Contact.IsOnline").online),e}function p(a){e=!a;for(var b=0,c=h.length;c>b;b++)h[b](a)}function c(a){if(!a.match(s)&&(g()&&"function"==typeof(q=i.OFFLINE_TIPS)&&q(),e))return false;var b=window.external&&window.external.CallHummerApi;if(b){try{data=b.apply(this,arguments),
data=o(data)}catch(c){return false}return data}return false}function r(a,b){if("object"!=typeof a)return a;var b=b||{},c;for(c in b)a[c]=b[c]}var j=this||window,i=j.CommonApi||(j.CommonApi={});i.version="0.1";var s=/(Contact\.IsOnline)|(Window\.)/,e,h=[],k=[],l=[],m,n,q;j.OnClientCall=function(a){if(a=o(a),"event"==a.type)switch(a.cmd){case "OnQQOnlineEvt":p(true);break;case "OnQQOfflineEvt":p(false);break;case "OnReceiveS2CMsg":for(var a=a.param,b=0,c=l.length;c>b;b++)l[b](a);break;case "CanCloseWindow":a:{a=
true;b=0;for(c=k.length;c>b;b++)if(a=k[b](),!a)break a}}else if("callback"==a.type)switch(a.cmd){case "OnOpenWebPicEvt":m&&m(a.param);break;case "onClipScreenEvt":n&&n(a.param)}};r(i,{dataReport:function(a){return c("Default.DataReport",'{ "bigt" : "'+a+'" }')},getPerfTimeStamp:function(){return c("Default.GetPerfTimeStamp")},show:function(){return c("Window.Show")},hide:function(){return c("Window.Hide")},close:function(){return c("Window.Close")},maximize:function(){return c("Window.Maximize")},
minimize:function(){return c("Window.Minimize")},restore:function(){return c("Window.Restore")},resize:function(a,b){return c("Window.Resize",'{ "width" : '+a+', "height" : '+b+" }")},move:function(a,b){return c("Window.Move",'{ "offsetX" : '+a+', "offsetY" : '+b+" }")},setTitle:function(a){return c("Window.SetTitle",'{ "title" : "'+a+'" }')},reloadPage:function(){return c("Window.ReloadPage")},popNewWebPage:function(a,b,d,f){return c("Window.PopNewWebPage",'{ "width" : '+a+', "height" : '+b+', "title" : "'+
f+'", "url" : "'+d+'" }')},alert:function(a,b,d){return c("Window.Alert",'{ "iconType" : '+a+', "title" : "'+b+'", "text" : "'+d+'" }')},confirm:function(a,b,d){return c("Window.Confirm",'{ "iconType" : '+a+', "title" : "'+b+'", "text" : "'+d+'" }')},getSelfUin:function(){return c("Contact.GetSelfUin").uin},getNickname:function(a){return c("Contact.GetNickName",'{ "uin" : "'+a+'" }')},isOnline:function(){return!g()},isOffline:g,setRemark:function(a,b){return c("Contact.SetRemark",'{ "uin" : "'+a+
'", "remark" : "'+b+'" }')},openContactInfoCard:function(a,b){return c("Contact.OpenContactInfoCard",'{ "uin" : "'+a+'", "tabId" : '+b+" }")},addFriend:function(a,b){return c("Contact.AddFriend",'{ "uin" : "'+a+'", "name" : "'+b+'" }')},openChatSession:function(a){return c("Contact.OpenChatSession",'{ "uin" : "'+a+'" }')},getVersion:function(){return c("IM.GetVersion")},getClientKey:function(){return c("IM.GetClientKey")},getSKey:function(){for(var a=c("IM.GetSKey"),b=a&&a.sKey,d=[],f=0,e=b.length;e>
f;f+=2)d.push(String.fromCharCode("0x"+b.slice(f,f+2)));return a.skey=d.join(""),a},openGroupInfoCard:function(a,b){return c("Group.OpenGroupInfoCard",'{ "groupId" : "'+a+'", "tabId" : '+b+" }")},joinGroup:function(a){return c("Group.JoinGroup",'{ "groupId" : "'+a+'" }')},downloadFile:function(a,b,d){return c("Misc.DownloadFile",'{ "url" : "'+a+'", "fileName" : "'+b+'", "fileSize" : "'+d+'" }')},openWebPic:function(a,b){return m=b,c("Misc.OpenWebPic",'{ "url" : "'+a+'", "function" : "OnOpenWebPicEvt" }')},
clipScreen:function(a,b,d,f,e){return n=e,c("Misc.ClipScreen",'{ "url" : "'+d+'", "cookies" : "'+a+'", "parameters" : "'+b+'", "method" : "'+f+'", "uploaded" : "onClipScreenEvt" }')},onQQStateChange:function(a){"function"==typeof a&&h.push(a)},onCanCloseWindow:function(a){"function"==typeof a&&k.push(a)},onReceiveS2CMsg:function(a){"function"==typeof a&&l.push(a)},extend:function(a,b){var c=Object.prototype.toString.call(a);"[object String]"===c?this[a]=b:"[object Object]"===c&&r(this,a)}})})();
