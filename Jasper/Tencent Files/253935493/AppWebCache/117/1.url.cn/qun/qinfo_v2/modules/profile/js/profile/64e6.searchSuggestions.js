(function(c,a){typeof define==="function"&&define.amd?define(["simple","../common/util","./db_app"],a):c.searchSuggestions=a(c.$,c.Util,c.DB)})(this,function(c,a,k){var b={},e={};e.fn=a.func.throttle(function(d,g,h){var a={sid:d,s:g,n:10};if(d===3){var e=b.provinceIpt.value,j=b.cityIpt.value;if(/\u5e02$/.test(e))a.k=e.slice(0,-1);else if(/\u5e02$/.test(j))a.k=j.slice(0,-1)}else if(d===4)if(b.school&&b.lastSchoolIDCache)a.k=b.lastSchoolIDCache[b.school];else return;b.search_key=g;k.search_string({param:a,
succ:function(a){if(b.search_key===g){var f=a.s||[];if(f.length>0){if(a.k&&(d===2||d===5||d===7)){var e={},i="";c.array.forEach(f,function(b,d){i=c.str.decodeHtml(b);e[i]=a.k[d];f[d]=i});b.lastSchoolIDCache=e;e=null}else c.array.forEach(f,function(a,b){f[b]=c.str.decodeHtml(a)});f.sort(function(a,b){var d=a.indexOf(g),c=b.indexOf(g);return d===c?a.length-b.length:d-c});h.refreshData(f);c.css.addClass(h.$ul.children[0],"on");h.keySel=0;h.show()}else h.hide()}}})},500);e.setValue=function(a,c){b[a]=
c};return e});
