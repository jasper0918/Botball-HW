define("jquery,modules/setting/js/common/client,modules/setting/js/common/cgi,modules/common/js/db,modules/setting/js/common/str,modules/setting/js/common/cookie,modules/common/js/reportPatchJquery".split(","),function(c,v,w,p){function i(a){var f=d.recordDom,c='<div id="records">';a&&a.length>0?(g.hide(),a.forEach(function(a){var x;x=f[a.id]='<ul>                        <li><span class="nick" title="'+a.nick+'">'+a.nick+'</span></li>                         <li><span class="time">'+a.time+'</span></li>                        <li><span class="operation" title="'+
a.content+'">'+a.content+"</span></li>                   </ul>",a=x;c+=a}),c+="</div>",j.html(c)):g.show()}var b=null,h,j,g,k,d,u=function(a){b&&b.length>0||(a=a.classname||"",c("body").append('<div id="recordBox" class="'+a+'">                <button id="boxCloser" class="boxCloser" ></button>                <h3><span>\u7fa4\u7ba1\u7406\u8005\u64cd\u4f5c\u8bb0\u5f55</span></h3>                <div id="record_content" class="content" >                </div>                <div class="tip-container" id="tip-container" style="display:none">                    <label class="tip-msg">\u8fd1\u4e24\u5468\u5185\u7fa4\u4e3b\u3001\u7ba1\u7406\u5458\u6682\u65e0\u201c\u901a\u8fc7\u52a0\u7fa4\u8eab\u4efd\u9a8c\u8bc1\u201d\u7b49\u64cd\u4f5c\u8bb0\u5f55</label>                </div>                <div class="btnBox">                    <span class="info" >\u652f\u6301\u67e5\u770b\u6700\u8fd1100\u6761\u64cd\u4f5c\u8bb0\u5f55                        <a class="admin-detail" aria-label="\u8fd1\u4e24\u5468\u64cd\u4f5c\u8bb0\u5f55\u8bf7\u5bfc\u51fa\u67e5\u770b" title="\u8fd1\u4e24\u5468\u64cd\u4f5c\u8bb0\u5f55\u8bf7\u5bfc\u51fa\u67e5\u770b" href="javascript:void(0)" tabindex="-1"><img src="modules/member/img/admindetail.png"></a>                    </span>                    <input type="button" id="export" value="\u5bfc\u51fa\u64cd\u4f5c\u8bb0\u5f55"/>                    <input type="button" id="closeRecordBox" value="\u5173\u95ed"/>                </div>            </div>'),
b=c("#recordBox"),h=c("#record_content"),g=c("#tip-container"),c("#closeRecordBox").click(e).bind("keydown",function(a){switch(a.keyCode){case 13:e()}}),b.find(".boxCloser").click(e).bind("keydown",function(a){switch(a.keyCode){case 13:e()}}),c("#export").click(l).bind("keydown",function(a){switch(a.keyCode){case 13:l()}}),h.html('<ul class="record-nav">            <li data-sq="nick" tabindex="0" aria-label="\u6309\u64cd\u4f5c\u8005\u6635\u79f0\u6392\u5e8f"><span>\u64cd\u4f5c\u8005</span></li>            <li data-sq="time" tabindex="0" aria-label="\u6309\u64cd\u4f5c\u65f6\u95f4\u6392\u5e8f"><span class="desc">\u64cd\u4f5c\u65f6\u95f4</span></li>            <li data-sq="content" tabindex="0" aria-label="\u6309\u64cd\u4f5c\u9879\u6392\u5e8f"><span>\u64cd\u4f5c\u9879</span></li>        </ul>'),
j=c('<div id="operation-wrapper" class="wapper"></div>').appendTo(h),b.bind("keypress",q).bind("keyup",r).bind("keydown",s),t())},t=function(){var a=c(".record-nav").find("li");a.each(function(f){var b=c(this),e=b.find("span");if(e.hasClass("desc")||e.hasClass("asc"))d.current=f;b.index=f;b.click(function(){var b=c(this),e=b.find("span").eq(0);e.hasClass("desc")?(e.addClass("asc").removeClass("desc"),m(b.data("sq"),true)):(e.hasClass("asc")?e.addClass("desc").removeClass("asc"):(a.eq(d.current).find("span")[0].className=
"",e.addClass("desc")),m(b.data("sq")));d.curSeq=b.data("sq");b.data("sq");d.current=f})})},m=function(a,b){var c=b?-1:1;d.recordData.sort(function(b,d){return b[a].localeCompare(d[a])*c});i(d.recordData)},l=function(){n("export_clk",{ver1:o.role});var a=p.getCgiDownloadUrl("qun_info/get_sys_msg_all",{gc:d.gc}),b=document.createElement("iframe");b.src=a;document.body.appendChild(b)},e=function(){b.hide()},q=function(){},r=function(){},s=function(){},o,n;return{init:function(a){k=a;d=a.status||{};
o=d.M||{};n=d.report_edu_manage||function(){}},showDialog:function(a){u(k);if(b.length)d.recordDom={},d.recordData=a,i(a),b.show()}}});
