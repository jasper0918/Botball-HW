define(["jquery","commonapi"],function(e,d){function g(a,b){try{return external[a].apply(this,b)}catch(c){}return false}var h={allowConcurrent:true},f,i={},j={getSKey:"Hummer_IM_GetSKey",openUserInfo:"Hummer_Contact_OpenContactInfoCard",getGroupUin:"GetGroupCode",getQQSkinColor:"GetQQSkinColor",getSelfIdentity:"GetSelfIdentity"},k=function(a,b,c){if(!(a==="init"||a==="register")){var d=e.extend({},f,b);c[a]=function(){if(!d.allowConcurrent&&c[a].isProcessing)return false;c[a].isProcessing=true;var b=
g(d.name,arguments);c[a].isProcessing=false;return d.json?window.JSON.parse(b):b};c[a].isProcessing=false}};return{init:function(a,b){f=e.extend({},h,b||{});for(var c in d)d.hasOwnProperty(c)&&typeof d[c]=="function"&&!this[c]&&(this[c]=function(a){return function(){return d[a].apply(d,arguments)}}(c));f.defaultParams=e.extend({},i,f.defaultParams);a=e.extend({},j,a);window.CommonApi=d;this.register(a)},register:function(a){for(var b in a)a.hasOwnProperty(b)&&(typeof a[b]==="string"&&(a[b]={name:a[b]}),
k(b,a[b],this))}}});
