(function(c){function i(a,c){var b=a.data("ddslick"),d=a.find(".dd-selected"),k=d.siblings(".dd-selected-value");a.find(".dd-options");d.siblings(".dd-pointer");var f=a.find(".dd-option").eq(c),i=f.closest("li"),g=b.settings,h=b.settings.data[c];a.find(".dd-option").removeClass("dd-option-selected");f.addClass("dd-option-selected");b.selectedIndex=c;b.selectedItem=i;b.selectedData=h;g.showSelectedHTML?d.html((h.imageSrc?'<img class="dd-selected-image'+(g.imagePosition=="right"?" dd-image-right":"")+
'" src="'+h.imageSrc+'" />':"")+(h.text?'<label class="dd-selected-text">'+h.text+"</label>":"")+(h.description?'<small class="dd-selected-description dd-desc'+(g.truncateDescription?" dd-selected-description-truncated":"")+'" >'+h.description+"</small>":"")):d.html(h.text);k.val(h.value);b.original.val(h.value);a.data("ddslick",b);j(a);d=a.find(".dd-select").css("height");k=a.find(".dd-selected-description");f=a.find(".dd-selected-image");k.length<=0&&f.length>0&&a.find(".dd-selected-text").css("lineHeight",
d);typeof g.onSelected=="function"&&g.onSelected.call(this,b)}function l(a){var e=a.find(".dd-select"),b=e.siblings(".dd-options"),d=e.find(".dd-pointer"),f=b.is(":visible");c(".dd-click-off-close").not(b).slideUp(50);c(".dd-pointer").removeClass("dd-pointer-up");e.removeClass("dd-open");f?(b.slideUp("fast"),d.removeClass("dd-pointer-up"),e.removeClass("dd-open")):(e.addClass("dd-open"),b.slideDown("fast"),d.addClass("dd-pointer-up"));n(a)}function j(a){a.find(".dd-select").removeClass("dd-open");
a.find(".dd-options").slideUp(50);a.find(".dd-pointer").removeClass("dd-pointer-up").removeClass("dd-pointer-up")}function n(a){a.find(".dd-option").each(function(){var e=c(this),b=e.css("height"),d=e.find(".dd-option-description"),f=a.find(".dd-option-image");d.length<=0&&f.length>0&&e.find(".dd-option-text").css("lineHeight",b)})}c.fn.ddslick=function(a){if(f[a])return f[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return f.init.apply(this,arguments);else c.error("Method "+
a+" does not exists.")};var f={},m={data:[],keepJSONItemsOnTop:false,width:260,height:null,background:"#eee",selectText:"",defaultSelectedIndex:null,truncateDescription:true,imagePosition:"left",showSelectedHTML:true,clickOffToClose:true,embedCSS:true,onSelected:function(){}};f.init=function(a){var e=c.extend({},m,a);c("#css-ddslick").length<=0&&e.embedCSS&&c('<style id="css-ddslick" type="text/css">.dd-select{ border-radius:2px; border:solid 1px #ccc; position:relative; cursor:pointer;}.dd-desc { color:#aaa; display:block; overflow: hidden; font-weight:normal; line-height: 1.4em; }.dd-selected{ overflow:hidden; display:block; padding:10px; font-weight:bold;}.dd-pointer{ width:0; height:0; position:absolute; right:10px; top:50%; margin-top:-3px;}.dd-pointer-down{ border:solid 5px transparent; border-top:solid 5px #000; }.dd-pointer-up{border:solid 5px transparent !important; border-bottom:solid 5px #000 !important; margin-top:-8px;}.dd-options{ border:solid 1px #ccc; border-top:none; list-style:none; box-shadow:0px 1px 5px #ddd; display:none; position:absolute; z-index:2000; margin:0; padding:0;background:#fff; overflow:auto;}.dd-option{ padding:10px; display:block; border-bottom:solid 1px #ddd; overflow:hidden; text-decoration:none; color:#333; cursor:pointer;-webkit-transition: all 0.25s ease-in-out; -moz-transition: all 0.25s ease-in-out;-o-transition: all 0.25s ease-in-out;-ms-transition: all 0.25s ease-in-out; }.dd-options > li:last-child > .dd-option{ border-bottom:none;}.dd-option:hover{ background:#f3f3f3; color:#000;}.dd-selected-description-truncated { text-overflow: ellipsis; white-space:nowrap; }.dd-option-selected { background:#f6f6f6; }.dd-option-image, .dd-selected-image { vertical-align:middle; float:left; margin-right:5px; max-width:64px;}.dd-image-right { float:right; margin-right:15px; margin-left:5px;}.dd-container{ position:relative;}\u200b .dd-selected-text { font-weight:bold}\u200b</style>').appendTo("head");
return this.each(function(){var b=c.extend({},m,a),d=c(this);if(!d.data("ddslick")){var e=[];d.find("option").each(function(){var a=c(this),b=a.data();e.push({text:c.trim(a.text()),value:a.val(),selected:a.is(":selected"),description:b.description,imageSrc:b.imagesrc})});b.keepJSONItemsOnTop?c.merge(b.data,e):b.data=c.merge(e,b.data);var f=d,j=c("<div").attr("id",d.attr("id")+"-dd-placeholder");d.replaceWith(j);d=j;d.addClass("dd-container").append('<div class="dd-select"><input class="dd-selected-value" type="hidden" /><a class="dd-selected"></a><span class="dd-pointer dd-pointer-down"></span></div>').append('<ul class="dd-options"></ul>');
d.find("input.dd-selected-value").attr("id",c(f).attr("id")).attr("name",c(f).attr("name"));var e=d.find(".dd-select"),g=d.find(".dd-options");g.css({width:b.width});e.css({width:b.width,background:b.background});d.css({width:b.width});b.height!=null&&g.css({height:b.height,overflow:"auto"});c.each(b.data,function(a,c){if(c.selected)b.defaultSelectedIndex=a;g.append('<li><a class="dd-option">'+(c.value?' <input class="dd-option-value" type="hidden" value="'+c.value+'" />':"")+(c.imageSrc?' <img class="dd-option-image'+
(b.imagePosition=="right"?" dd-image-right":"")+'" src="'+c.imageSrc+'" />':"")+(c.text?' <label class="dd-option-text">'+c.text+"</label>":"")+(c.description?' <small class="dd-option-description dd-desc">'+c.description+"</small>":"")+"</a></li>")});d.data("ddslick",{settings:b,original:f,selectedIndex:-1,selectedItem:null,selectedData:null});b.selectText.length>0&&b.defaultSelectedIndex==null?d.find(".dd-selected").html(b.selectText):i(d,b.defaultSelectedIndex!=null&&b.defaultSelectedIndex>=0&&
b.defaultSelectedIndex<b.data.length?b.defaultSelectedIndex:0);d.find(".dd-select").on("click.ddslick",function(){l(d)});d.find(".dd-option").on("click.ddslick",function(){i(d,c(this).closest("li").index())});b.clickOffToClose&&(g.addClass("dd-click-off-close"),d.on("click.ddslick",function(a){a.stopPropagation()}),c("body").on("click",function(){c(".dd-open").removeClass("dd-open");c(".dd-click-off-close").slideUp(50).siblings(".dd-select").find(".dd-pointer").removeClass("dd-pointer-up")}))}})};
f.select=function(a){return this.each(function(){a.index!==void 0&&i(c(this),a.index);if(a.id){var e=c(this),b=e.find(".dd-option-value[value= '"+a.id+"']").parents("li").prevAll().length;i(e,b)}})};f.open=function(){return this.each(function(){var a=c(this);a.data("ddslick")&&l(a)})};f.close=function(){return this.each(function(){var a=c(this);a.data("ddslick")&&j(a)})};f.destroy=function(){return this.each(function(){var a=c(this),e=a.data("ddslick");if(e)e=e.original,a.removeData("ddslick").unbind(".ddslick").replaceWith(e)})}})(jQuery);
