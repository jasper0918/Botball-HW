(function(g,f){typeof define==="function"&&define.amd?define([],f):g.Client=f()})(this,function(){(function(){var a;return function(){if(!a&&(a=((window.Simple||{}).browser||{}).info,!a)){a={type:""};var b=navigator.userAgent.toLowerCase();/webkit/.test(b)?a={type:"webkit",version:/webkit[\/ ]([\w.]+)/}:/opera/.test(b)?a={type:"opera",version:/version/.test(b)?/version[\/ ]([\w.]+)/:/opera[\/ ]([\w.]+)/}:/msie/.test(b)?a={type:"msie",version:/msie ([\w.]+)/}:/mozilla/.test(b)&&!/compatible/.test(b)&&
(a={type:"ff",version:/rv:([\w.]+)/});a.version=(a.version&&a.version.exec(b)||[0,"0"])[1]}return a}})();var g={getHash:function(a){a=window.location.hash.match(RegExp("(#|&)"+a+"=([^&]*)(&|$)"));return!a?"":decodeURIComponent(a[2])},query:function(a){a=window.location.search.match(RegExp("(\\?|&)"+a+"=([^&]*)(&|$)"));return!a?"":decodeURIComponent(a[2])}},f=function(a,b,e){var d=null,c=top;console.info("callClientAPI:name["+a+"],params["+b+"],msgType["+e+"],typeof params="+typeof b);try{switch(a){case "OnSave":"OnSave"in
c.external&&(d=c.external.OnSave(b));break;case "OnShowTips":"OnShowTips"in c.external?d=c.external.OnShowTips(b,e):alert(b);break;case "IsSelfOnline":"Hummer_Contact_IsOnline"in c.external?(console.info("before run client:Hummer_Contact_IsOnline"),d=c.external.Hummer_Contact_IsOnline()):"IsSelfOnline"in c.external?(console.info("before run client:IsSelfOnline"),d=c.external.IsSelfOnline()):window.DEBUG&&(d=true);break;case "OnModifyRemark":"OnModifyRemark"in c.external&&(d=c.external.OnModifyRemark());
break;case "OpenModifyHeadWnd":"OpenModifyHeadWnd"in c.external&&(b+="",c.external.OpenModifyHeadWnd(b));break;case "ModifyRemark":"ModifyRemark"in c.external&&c.external.ModifyRemark(b);break;case "OpenUpgradeFrame":"OpenUpgradeFrame"in c.external&&c.external.OpenUpgradeFrame()}}catch(f){}return d},h=-1;return{getClientVersion:function(){if(h===-1){var a=-1,b=top,e=g.query("clientversion")||g.getHash("clientversion");e&&(a=e);a===-1&&"external"in b&&("CallHummerApi"in b.external?a=b.external.CallHummerApi("IM.GetVersion"):
"Hummer_IM_GetVersion"in b.external&&(a=b.external.Hummer_IM_GetVersion()));h=a===-1?0:a}return h},callClientAPI:f,hasClientAPI:function(a){var b=top;return"external"in b&&a in b.external},showTips:function(a,b){a&&(b===void 0&&(b=1),f("OnShowTips",a,b))},confirm:function(a,b,e){var d={};try{d=top.external.CallHummerApi("Window.Confirm",JSON.stringify({iconType:a,title:b,text:e})),d=JSON.parse(d)}catch(c){d={}}return d}}});
