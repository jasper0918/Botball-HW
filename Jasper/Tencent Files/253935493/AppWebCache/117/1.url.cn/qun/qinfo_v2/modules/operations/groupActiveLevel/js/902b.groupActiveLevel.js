/*
 RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/text for details
*/
(function(){define("text",["module"],function(f){var h,n,l,o,u,m=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],q=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,k=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,i=typeof location!=="undefined"&&location.href,p=i&&location.protocol&&location.protocol.replace(/\:/,""),s=i&&location.hostname,t=i&&(location.port||void 0),r={},g=f.config&&f.config()||{};h={version:"2.0.10",strip:function(a){if(a){var a=a.replace(q,""),e=a.match(k);e&&(a=
e[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var a,e,d;if(typeof XMLHttpRequest!=="undefined")return new XMLHttpRequest;else if(typeof ActiveXObject!=="undefined")for(e=0;e<3;e+=1){d=m[e];try{a=new ActiveXObject(d)}catch(c){}if(a){m=[d];break}}return a},
parseName:function(a){var e,d,c=false,b=a.indexOf(".");e=a.indexOf("./")===0||a.indexOf("../")===0;b!==-1&&(!e||b>1)?(e=a.substring(0,b),d=a.substring(b+1,a.length)):e=a;a=d||e;b=a.indexOf("!");b!==-1&&(c=a.substring(b+1)==="strip",a=a.substring(0,b),d?d=a:e=a);return{moduleName:e,ext:d,strip:c}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,e,d,c){var b,j;b=h.xdRegExp.exec(a);if(!b)return true;a=b[2];b=b[3];b=b.split(":");j=b[1];b=b[0];return(!a||a===e)&&(!b||b.toLowerCase()===d.toLowerCase())&&
(!j&&!b||j===c)},finishLoad:function(a,e,d,c){d=e?h.strip(d):d;g.isBuild&&(r[a]=d);c(d)},load:function(a,e,d,c){if(c.isBuild&&!c.inlineText)d();else{g.isBuild=c.isBuild;var b=h.parseName(a),c=b.moduleName+(b.ext?"."+b.ext:""),j=e.toUrl(c),f=g.useXhr||h.useXhr;j.indexOf("empty:")===0?d():!i||f(j,p,s,t)?h.get(j,function(e){h.finishLoad(a,b.strip,e,d)},function(a){d.error&&d.error(a)}):e([c],function(a){h.finishLoad(b.moduleName+"."+b.ext,b.strip,a,d)})}},write:function(a,e,d){if(r.hasOwnProperty(e)){var c=
h.jsEscape(r[e]);d.asModule(a+"!"+e,"define(function () { return '"+c+"';});\n")}},writeFile:function(a,e,d,c,b){var e=h.parseName(e),j=e.ext?"."+e.ext:"",f=e.moduleName+j,g=d.toUrl(e.moduleName+j)+".js";h.load(f,d,function(){var d=function(a){return c(g,a)};d.asModule=function(a,b){return c.asModule(a,g,b)};h.write(a,f,d,b)},b)}};if(g.env==="node"||!g.env&&typeof process!=="undefined"&&process.versions&&process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),h.get=function(a,
e,d){try{var c=n.readFileSync(a,"utf8");c.indexOf("\ufeff")===0&&(c=c.substring(1));e(c)}catch(b){d(b)}};else if(g.env==="xhr"||!g.env&&h.createXhr())h.get=function(a,e,d,c){var b=h.createXhr(),f;b.open("GET",a,true);if(c)for(f in c)c.hasOwnProperty(f)&&b.setRequestHeader(f.toLowerCase(),c[f]);if(g.onXhr)g.onXhr(b,a);b.onreadystatechange=function(){var c;if(b.readyState===4&&(c=b.status,c>399&&c<600?(c=Error(a+" HTTP status: "+c),c.xhr=b,d(c)):e(b.responseText),g.onXhrComplete))g.onXhrComplete(b,
a)};b.send(null)};else if(g.env==="rhino"||!g.env&&typeof Packages!=="undefined"&&typeof java!=="undefined")h.get=function(a,e){var d,c,b=new java.io.File(a),f=java.lang.System.getProperty("line.separator"),b=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(b),"utf-8")),g="";try{d=new java.lang.StringBuffer;(c=b.readLine())&&c.length()&&c.charAt(0)===65279&&(c=c.substring(1));for(c!==null&&d.append(c);(c=b.readLine())!==null;)d.append(f),d.append(c);g=String(d.toString())}finally{b.close()}e(g)};
else if(g.env==="xpconnect"||!g.env&&typeof Components!=="undefined"&&Components.classes&&Components.interfaces)l=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),u="@mozilla.org/windows-registry-key;1"in l,h.get=function(a,e){var d,c,b,f={};u&&(a=a.replace(/\//g,"\\"));b=new FileUtils.File(a);try{d=l["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),d.init(b,1,0,false),c=l["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),
c.init(d,"utf-8",d.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),c.readString(d.available(),f),c.close(),d.close(),e(f.value)}catch(g){throw Error((b&&b.path||"")+": "+g);}};return h});define("text!modules/operations/groupActiveLevel/groupActiveLevel.html",[],function(){return'<div class="group_level_inner">\r\n    <div class="group_level_wrap">\r\n\t<div class="group_level_header">\r\n\t\t<div id="group_level_loading" class="group_level_loading">\u52a0\u8f7d\u4e2d...</div>\r\n\t\t<div class="group_level" id="group_level_cur">\u672c\u7fa4\u7b49\u7ea7\uff1a<span class="icon" id="group_level_icon"></span></div>\r\n\t\t<div id="group_level_inactive" class="group_level_desc">(\u7531\u4e8e\u672c\u7fa4\u8d44\u6599\u5b8c\u6574\u5ea6\u4e0d\u591f\uff0c\u6682\u65e0\u6cd5\u70b9\u4eae\u7b49\u7ea7\u56fe\u6807)</div>\r\n\t\t<div id="group_level_active" class="group_level_desc">(\u7fa4\u6210\u5458\u6570\u4e3a<span id="group_level_mem_num"></span>\u4eba\uff0c\u6d3b\u8dc3\u6210\u5458\u6570\u8fbe<span id="group_level_active_num"></span>\u4eba\uff0c\u5360\u603b\u6bd4<span id="group_level_active_ratio"></span>)</div>\r\n\t</div>\r\n\t<h3 class="group_level_title">\u7b49\u7ea7\u89c4\u5219</h3>\r\n\t<table class="rule_table">\r\n\t\t<tr>\r\n\t\t\t<th class="level_num">\u7b49\u7ea7</th>\r\n\t\t\t<th class="level_icon">\u7b49\u7ea7\u56fe\u6807</th>\r\n\t\t\t<th class="level_condition">\u6761\u4ef6</th>\r\n\t\t</tr>\r\n\t\t<tr><\!-- lv 1 --\>\r\n\t\t\t<td class="level_num">LV1</td>\r\n\t\t\t<td class="level_icon"><span class="icon level_1 group_level_icon_1"></span></td>\r\n\t\t\t<td class="level_condition">\r\n\t\t\t\t<ol class="level_list">\r\n\t\t\t\t\t<li>\u5b8c\u6574\u586b\u5199\u7fa4\u8d44\u6599\uff0c\u4e0a\u4f20\u81ea\u5b9a\u4e49\u7fa4\u5934\u50cf\uff0c\u6807\u7b7e\u4e0d\u5c11\u4e8e1\u4e2a\uff0c\u7b80\u4ecb\u4e0d\u5c11\u4e8e30\u4e2a\u5b57</li>\r\n\t\t\t\t\t<li>\u7fa4\u5185\u76f8\u7247\u6570\u4e0d\u5c11\u4e8e3\u5f20\uff0c\u6587\u4ef6\u4e0d\u5c11\u4e8e2\u4e2a<span id="group_level_open_hint" style="display:none;">\uff0c\u4e14\u5141\u8bb8\u6e38\u5ba2\u5728\u8d44\u6599\u5361\u67e5\u770b\u6458\u8981</span><a href="javascript:void(0)" class="set_open js_set_open" style="display:none;">(<span>\u7acb\u5373\u8bbe\u7f6e</span>)</a></li>\r\n\t\t\t\t</ol>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t<tr><\!-- lv 2--\>\r\n\t\t\t<td class="level_num">LV2</td>\r\n\t\t\t<td class="level_icon"><span class="icon level_2 group_level_icon_2"></span></td>\r\n\t\t\t<td class="level_condition">\u7fa4\u4eba\u6570>50\uff0c\u53d1\u8a00\u4eba\u657020\u4ee5\u4e0a</td>\r\n\t\t</tr>\r\n\t\t<tr><\!-- lv 3--\>\r\n\t\t\t<td class="level_num">LV3</td>\r\n\t\t\t<td class="level_icon"><span class="icon level_3 group_level_icon_3"></span></td>\r\n\t\t\t<td class="level_condition">\u7fa4\u4eba\u6570>100\uff0c\u53d1\u8a00\u4eba\u657040\u4ee5\u4e0a</td>\r\n\t\t</tr>\r\n\t\t<tr><\!-- lv 4--\>\r\n\t\t\t<td class="level_num">LV4</td>\r\n\t\t\t<td class="level_icon"><span class="icon level_4 group_level_icon_4"></span></td>\r\n\t\t\t<td class="level_condition">\u7fa4\u4eba\u6570>200\uff0c\u53d1\u8a00\u4eba\u657080\u4ee5\u4e0a</td>\r\n\t\t</tr>\r\n\t\t<tr><\!-- lv 5--\>\r\n\t\t\t<td class="level_num">LV5</td>\r\n\t\t\t<td class="level_icon"><span class="icon level_5 group_level_icon_5"></span></td>\r\n\t\t\t<td class="level_condition">\u7fa4\u4eba\u6570>400\uff0c\u53d1\u8a00\u4eba\u6570120\u4ee5\u4e0a</td>\r\n\t\t</tr>\r\n\t</table>\r\n\t<h3 class="level_desc_title">\u7b49\u7ea7\u7279\u6743\u8bf4\u660e</h3>\r\n\t<ol class="list">\r\n\t\t<li>\u7fa4\u7b49\u7ea7\u8d8a\u9ad8\uff0c\u8be5\u7fa4\u5728\u641c\u7d22\u7ed3\u679c\u4e2d\u7684\u6392\u540d\u8d8a\u9760\u524d</li>\r\n\t\t<li>\u7fa4\u88ab\u4e3e\u62a5\u6216\u52a0\u7fa4\u901a\u8fc7\u7387\u4f4e\uff0c\u6709\u53ef\u80fd\u7fa4\u7b49\u7ea7\u4f1a\u88ab\u964d\u4f4e</li>\r\n\t\t<li>\u7fa4\u7b49\u7ea7\u8ba1\u7b97\u8fc7\u53bb30\u5929\u7684\u6570\u636e\uff0c\u4e14\u6bcf\u5929\u5237\u65b0\u4e00\u6b21</li>\r\n\t</ol>\r\n    </div>\r\n\t<a class="close js_close" href="javascript:void(0)" title="\u5173\u95ed"></a>\r\n</div>\t'});
define("groupActiveLevel",["jquery","modules/common/js/reportPatchJquery","modules/common/js/db","commonapi","text!modules/operations/groupActiveLevel/groupActiveLevel.html"],function(f,h,n,l,o){return function(){var h=false,m,q,k=null,i,p,s=function(a,e){n.setSetting({param:{gc:m,photoflag:1},succ:function(d){a&&a(d);console.log("set_group_setting succ")},err:function(a){e&&e(a);console.log("set_group_setting err: ")}})},t=function(){i.on("click",function(){l.confirm(1,"\u6e29\u99a8\u63d0\u793a",
"\u5141\u8bb8\u6e38\u5ba2\u5728\u8d44\u6599\u5361\u9884\u89c8\u76f8\u518c\u548c\u6587\u4ef6\u6458\u8981\uff01\n\u65e0\u6cd5\u4e0b\u8f7d\u548c\u67e5\u770b\u8be6\u60c5").ret&&s(function(){i.fadeOut();top.postMessage(JSON.stringify({event:"OnShareFlagChanged",from:"GroupActiveLevel"}),"*")},function(){l.alert(1,"\u6e29\u99a8\u63d0\u793a","\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")})});p.on("click",function(){k.fadeOut(function(){i.off("click");p.off("click");k.remove();p=i=null;h=
false})})},r=function(){n.get_group_info({param:{gc:m},succ:function(a){q=a.flag;f("#group_level_loading").hide();var e=a.ac_grade||0;e?(f("#group_level_mem_num").html(a.gMemNum),f("#group_level_active_num").html(a.ac_num),f("#group_level_active_ratio").html((a.ac_num/a.gMemNum).toFixed(2)),f("#group_level_active").css("display","inline-block").fadeIn()):f("#group_level_inactive").css("display","inline-block").fadeIn();f("#group_level_icon").addClass("group_level_icon_"+e);f("#group_level_cur").css("display",
"inline-block").fadeIn();console.log("group active level: get_group_info err!")},err:function(){console.log("group active level: get_group_info err!")}})},g=function(){n.getSetting({type:"GET",param:{gc:m},succ:function(a){a.open?f("#group_level_open_hint").hide():f("#group_level_open_hint").fadeIn(600);a.share||a.open?i.hide():(q==3||q==2)&&i.fadeIn(400)},err:function(){i.hide()}})};return{show:function(a){if(!h)h=true,m=a.groupuin,f(a.parentNode||document.body),k=f('<div id="group_active_level" class="group_level_container"></div>').fadeIn(),
k.html(o).appendTo(document.body),i=f(".js_set_open",k),p=f(".js_close",k),r(),g(),t()}}}()})})();
