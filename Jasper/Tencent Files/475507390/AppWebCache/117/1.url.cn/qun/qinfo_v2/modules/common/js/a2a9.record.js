if(!window.TRecord)window.TRecord={m:{},push:function(c,d,b){var a=this.m,c=a[c]||(a[c]={arr:[],hash:{}},a[c]);c.arr.push(d);c.hash[d]=typeof b!=="undefined"?b:+new Date}};TRecord.get=function(c,d){var b=this.m[c];return b&&d?b.hash[d]:b};
TRecord.report=function(c,d,b,a){var e=Math.random()*100+1;if(typeof a=="undefined"||e<=a)if(e=this.get(d)){for(var a=[],g=e.arr,h=1,i=g.length,f;h<i;h++)f=g[h],f in b&&a.push(b[f]+"="+(e.hash[f]-e.hash[g[0]]));if(a.length)b=a.join("&"),b="http://isdspeed.qq.com/cgi-bin/r.cgi?"+c+"&"+b,console&&console.info&&console.info("isdspeed report['"+d+"']: "+b),(new Image).src=b}};TRecord.cache=[];TRecord.cacheTime=500;TRecord.curFlagURL="";
TRecord.report2=function(c,d,b,a){var e=Math.random()*100+1;if(typeof a=="undefined"||e<=a)if(e=this.get(d)){for(var a=[],g=e.arr,h=1,i=g.length,f;h<i;h++)f=g[h],f in b&&a.push(b[f]+"="+(e.hash[f]-e.hash[g[0]]));a.length&&(this.doReport(c,a),console&&console.info&&console.info("isdspeed report['"+d+"']: "+a.join("&")))}};
TRecord.doReport=function(c,d){var b=this,a=function(){var a=b.cache,c="",d=b.curFlagURL;if(a.length)c=a.join("&"),(new Image).src="http://isdspeed.qq.com/cgi-bin/r.cgi?"+d+"&"+c;b.cache=[];b.curFlagURL=""};this.timer&&clearTimeout(this.timer);c!=this.curFlagURL&&a();this.curFlagURL=c;this.cache=this.cache.concat(d);setTimeout(function(){a()},this.cacheTime)};
